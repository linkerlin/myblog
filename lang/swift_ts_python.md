---
title: Swift 5, TypeScript, and Python Async/Await æœºåˆ¶å¯¹æ¯”åˆ†æ

---

Swift 5ã€TypeScript å’Œ Python çš„ `async/await` æœºåˆ¶éƒ½æ—¨åœ¨ç®€åŒ–å¼‚æ­¥ç¼–ç¨‹ï¼Œä½†å®ƒä»¬åœ¨å®ç°ç»†èŠ‚ã€å¹¶å‘æ¨¡å‹å’Œæ€§èƒ½ç‰¹å¾ä¸Šæœ‰æ‰€ä¸åŒã€‚**Swift 5 çš„ `async/await` æ„å»ºäºç»“æ„åŒ–å¹¶å‘ä¹‹ä¸Šï¼Œå¼ºè°ƒé€šè¿‡ `Task` è¿›è¡Œéé˜»å¡çš„ä»»åŠ¡æŒ‚èµ·å’Œé«˜æ•ˆçš„çº¿ç¨‹åˆ©ç”¨ã€‚TypeScript (JavaScript) çš„ `async/await` æ˜¯åŸºäº `Promise` å’Œäº‹ä»¶å¾ªç¯çš„è¯­æ³•ç³–ï¼Œé€‚ç”¨äºå•çº¿ç¨‹éé˜»å¡ I/O ç¯å¢ƒã€‚Python çš„ `async/await` åˆ™ä¾èµ–äº `asyncio` åº“å’Œåç¨‹ï¼Œé€šè¿‡äº‹ä»¶å¾ªç¯å®ç°åä½œå¼å¤šä»»åŠ¡ï¼Œç‰¹åˆ«é€‚åˆ I/O å¯†é›†å‹åº”ç”¨ã€‚** ä¸‰è€…åœ¨é”™è¯¯å¤„ç†ä¸Šéƒ½å€¾å‘äºä½¿ç”¨ç±»ä¼¼åŒæ­¥ä»£ç çš„ `try-catch` ç»“æ„ï¼Œä½†åœ¨å¹¶å‘æ‰§è¡Œçš„å…·ä½“æ–¹å¼ï¼ˆå¦‚ Swift çš„ `async let`/`TaskGroup`ï¼ŒTypeScript çš„ `Promise.all`ï¼ŒPython çš„ `asyncio.gather`ï¼‰å’Œé˜»å¡è¡Œä¸ºï¼ˆSwift å’Œ Python å¼ºè°ƒéé˜»å¡æŒ‚èµ·ï¼ŒJavaScript æœ¬èº«æ˜¯å•çº¿ç¨‹éé˜»å¡ï¼‰ä¸Šå­˜åœ¨å·®å¼‚ã€‚


## 1. æ¦‚è¿°
### 1.1 å¼‚æ­¥ç¼–ç¨‹çš„é‡è¦æ€§
åœ¨ç°ä»£è½¯ä»¶å¼€å‘ä¸­ï¼Œ**å¼‚æ­¥ç¼–ç¨‹æ‰®æ¼”ç€è‡³å…³é‡è¦çš„è§’è‰²**ã€‚éšç€åº”ç”¨ç¨‹åºæ—¥ç›Šå¤æ‚ï¼Œç”¨æˆ·å¯¹å“åº”é€Ÿåº¦å’Œç³»ç»Ÿååé‡çš„è¦æ±‚ä¹Ÿè¶Šæ¥è¶Šé«˜ã€‚æ— è®ºæ˜¯å¤„ç†é«˜å¹¶å‘çš„ç½‘ç»œè¯·æ±‚ã€æ‰§è¡Œè€—æ—¶çš„ I/O æ“ä½œï¼ˆå¦‚æ–‡ä»¶è¯»å†™ã€æ•°æ®åº“è®¿é—®ï¼‰ï¼Œè¿˜æ˜¯åœ¨ä¸é˜»å¡ç”¨æˆ·ç•Œé¢çš„å‰æä¸‹è¿è¡Œåå°ä»»åŠ¡ï¼Œå¼‚æ­¥ç¼–ç¨‹éƒ½æ˜¯å®ç°è¿™äº›ç›®æ ‡çš„å…³é”®æŠ€æœ¯ã€‚ä¼ ç»Ÿçš„åŒæ­¥ç¼–ç¨‹æ¨¡å‹åœ¨æ‰§è¡Œé•¿æ—¶é—´æ“ä½œæ—¶ä¼šé˜»å¡å½“å‰çº¿ç¨‹ï¼Œå¯¼è‡´åº”ç”¨ç¨‹åºæ— æ³•å“åº”å…¶ä»–è¯·æ±‚æˆ–ç”¨æˆ·äº¤äº’ï¼Œä»è€Œé€ æˆç³Ÿç³•çš„ç”¨æˆ·ä½“éªŒå’Œä½æ•ˆçš„èµ„æºåˆ©ç”¨ã€‚å¼‚æ­¥ç¼–ç¨‹é€šè¿‡éé˜»å¡çš„æ–¹å¼å¤„ç†è¿™äº›æ“ä½œï¼Œå…è®¸ç¨‹åºåœ¨ç­‰å¾…ä¸€ä¸ªæ“ä½œå®Œæˆçš„åŒæ—¶ç»§ç»­æ‰§è¡Œå…¶ä»–ä»»åŠ¡ï¼Œä»è€Œæœ€å¤§é™åº¦åœ°æé«˜ CPU å’Œ I/O èµ„æºçš„åˆ©ç”¨ç‡ï¼Œæå‡åº”ç”¨ç¨‹åºçš„æ€§èƒ½å’Œå“åº”æ€§ã€‚

### 1.2 `async/await` æ¨¡å¼çš„å…´èµ·
å°½ç®¡å¼‚æ­¥ç¼–ç¨‹å¸¦æ¥äº†è¯¸å¤šå¥½å¤„ï¼Œä½†ä¼ ç»Ÿçš„å¼‚æ­¥ç¼–ç¨‹æ¨¡å¼ï¼Œå¦‚å›è°ƒå‡½æ•°å’Œ `Promise` é“¾ï¼Œå¾€å¾€ä¼šå¯¼è‡´ä»£ç ç»“æ„å¤æ‚ã€éš¾ä»¥ç†è§£å’Œç»´æŠ¤ï¼Œå³æ‰€è°“çš„â€œå›è°ƒåœ°ç‹±â€ï¼ˆCallback Hellï¼‰æˆ–â€œ`Promise` é‡‘å­—å¡”â€ã€‚ä¸ºäº†è§£å†³è¿™äº›é—®é¢˜ï¼Œ**`async/await` æ¨¡å¼åº”è¿è€Œç”Ÿï¼Œå¹¶è¿…é€Ÿæˆä¸ºç°ä»£ç¼–ç¨‹è¯­è¨€ä¸­å¤„ç†å¼‚æ­¥æ“ä½œçš„ä¸»æµèŒƒå¼**ã€‚`async/await` é€šè¿‡åœ¨è¯­è¨€å±‚é¢æä¾›ç‰¹æ®Šçš„è¯­æ³•ç³–ï¼Œä½¿å¾—å¼€å‘è€…èƒ½å¤Ÿä»¥è¿‘ä¹åŒæ­¥ä»£ç çš„ç¼–å†™æ–¹å¼æ¥ç¼–å†™å¼‚æ­¥é€»è¾‘ã€‚`async` å…³é”®å­—ç”¨äºå£°æ˜ä¸€ä¸ªå‡½æ•°æ˜¯å¼‚æ­¥çš„ï¼Œè€Œ `await` å…³é”®å­—åˆ™ç”¨äºç­‰å¾…ä¸€ä¸ªå¼‚æ­¥æ“ä½œçš„å®Œæˆã€‚è¿™ç§æ¨¡å¼æå¤§åœ°ç®€åŒ–äº†å¼‚æ­¥ä»£ç çš„æµç¨‹æ§åˆ¶ï¼Œä½¿å¾—ä»£ç æ›´æ˜“äºé˜…è¯»ã€è°ƒè¯•å’Œæ¨ç†ï¼ŒåŒæ—¶ä¿ç•™äº†å¼‚æ­¥ç¼–ç¨‹çš„æ€§èƒ½ä¼˜åŠ¿ã€‚Swift 5.5ã€TypeScript (JavaScript ES2017) å’Œ Python 3.5+ ç­‰ä¸»æµè¯­è¨€éƒ½ç›¸ç»§å¼•å…¥äº† `async/await` æœºåˆ¶ï¼Œåæ˜ äº†å…¶åœ¨ç®€åŒ–å¼‚æ­¥ç¼–ç¨‹æ–¹é¢çš„å·¨å¤§æˆåŠŸå’Œå¹¿æ³›è®¤å¯ã€‚

## 2. Swift 5 Async/Await æœºåˆ¶
Swift 5.5 å¼•å…¥çš„ `async/await` æœºåˆ¶æ˜¯ Swift å¹¶å‘ç¼–ç¨‹æ¨¡å‹çš„æ ¸å¿ƒç»„æˆéƒ¨åˆ†ï¼Œæ—¨åœ¨ç®€åŒ–å¼‚æ­¥ä»£ç çš„ç¼–å†™å’Œç†è§£ï¼ŒåŒæ—¶æé«˜ä»£ç çš„å®‰å…¨æ€§å’Œæ€§èƒ½ ã€‚è¿™ä¸€æœºåˆ¶é€šè¿‡æä¾›ä¸€ç§ç»“æ„åŒ–çš„æ–¹å¼æ¥å¤„ç†å¼‚æ­¥æ“ä½œï¼Œé¿å…äº†ä¼ ç»Ÿå›è°ƒå‡½æ•°å¸¦æ¥çš„â€œå›è°ƒåœ°ç‹±â€ï¼ˆPyramid of Doomï¼‰é—®é¢˜ï¼Œå¹¶ä½¿é”™è¯¯å¤„ç†æ›´åŠ ç›´è§‚ ã€‚Swift çš„ `async/await` æ„å»ºåœ¨è¯­è¨€å±‚é¢çš„å¹¶å‘æ”¯æŒä¹‹ä¸Šï¼Œä¸ `Task`ã€`Actor` ç­‰æ¦‚å¿µç´§å¯†é›†æˆï¼Œä¸ºå¼€å‘è€…æä¾›äº†ä¸€å¥—å¼ºå¤§ä¸”æ˜“äºä½¿ç”¨çš„å¹¶å‘å·¥å…·é›† ã€‚

### 2.1 å¼‚æ­¥å‡½æ•°çš„å®šä¹‰ä¸è°ƒç”¨
åœ¨ Swift ä¸­ï¼Œ**å¼‚æ­¥å‡½æ•°é€šè¿‡åœ¨å…¶å£°æ˜ä¸­çš„å‚æ•°åˆ—è¡¨å’Œè¿”å›ç±»å‹ä¹‹é—´æ·»åŠ  `async` å…³é”®å­—æ¥å®šä¹‰** ã€‚å¦‚æœå¼‚æ­¥å‡½æ•°å¯èƒ½æŠ›å‡ºé”™è¯¯ï¼Œåˆ™è¿˜éœ€è¦åœ¨ `async` å…³é”®å­—ä¹‹å‰æˆ–ä¹‹åï¼ˆæ ¹æ® Swift ç‰ˆæœ¬ï¼‰æ·»åŠ  `throws` å…³é”®å­—ï¼Œå½¢æˆ `async throws` çš„ç»„åˆ ã€‚ä¾‹å¦‚ï¼Œä¸€ä¸ªä»ç½‘ç»œè·å–æ•°æ®çš„å¼‚æ­¥å‡½æ•°å¯ä»¥å®šä¹‰ä¸º `func fetchData() async throws -> Data` ã€‚è¿™ç§å£°æ˜æ–¹å¼æ¸…æ™°åœ°è¡¨æ˜äº†å‡½æ•°çš„å¼‚æ­¥ç‰¹æ€§ä»¥åŠå…¶å¯èƒ½å¤±è´¥çš„è¡Œä¸ºã€‚è°ƒç”¨å¼‚æ­¥å‡½æ•°æ—¶ï¼Œ**å¿…é¡»åœ¨è¡¨è¾¾å¼å‰ä½¿ç”¨ `await` å…³é”®å­—**ã€‚`await` æ ‡è®°äº†ä¸€ä¸ªæ½œåœ¨çš„æŒ‚èµ·ç‚¹ï¼ˆsuspension pointï¼‰ï¼Œè¡¨ç¤ºå½“å‰å‡½æ•°çš„æ‰§è¡Œå¯èƒ½ä¼šæš‚åœï¼Œç›´åˆ°è¢«è°ƒç”¨çš„å¼‚æ­¥æ“ä½œå®Œæˆå¹¶è¿”å›ç»“æœ ã€‚åœ¨ `await` è¡¨è¾¾å¼æ‰§è¡ŒæœŸé—´ï¼Œå½“å‰çº¿ç¨‹ä¸ä¼šè¢«é˜»å¡ï¼Œè€Œæ˜¯å¯ä»¥è¢«ç³»ç»Ÿç”¨æ¥æ‰§è¡Œå…¶ä»–ä»»åŠ¡ï¼Œè¿™å¯¹äºä¿æŒåº”ç”¨çš„å“åº”æ€§è‡³å…³é‡è¦ï¼Œå°¤å…¶æ˜¯åœ¨ä¸»çº¿ç¨‹ä¸Šæ‰§è¡Œ UI ç›¸å…³æ“ä½œæ—¶ ã€‚ä¾‹å¦‚ï¼Œè°ƒç”¨ä¸Šè¿° `fetchData` å‡½æ•°å¯ä»¥å†™ä½œ `let data = try await fetchData()` ã€‚éœ€è¦æ³¨æ„çš„æ˜¯ï¼Œ**`await` å…³é”®å­—åªèƒ½åœ¨å¦ä¸€ä¸ªå¼‚æ­¥å‡½æ•°ã€å¼‚æ­¥é—­åŒ…æˆ–è€…ç‰¹å®šå¹¶å‘ä¸Šä¸‹æ–‡ï¼ˆå¦‚ `Task` å—ï¼‰ä¸­ä½¿ç”¨** ã€‚Swift çš„ `async/await` ä¸ä»…é™äºå‡½æ•°ï¼Œè¿˜å¯ä»¥åº”ç”¨äºè®¡ç®—å±æ€§ï¼ˆgetterï¼‰å’Œåˆå§‹åŒ–å™¨ï¼Œå°½ç®¡å¼‚æ­¥è®¡ç®—å±æ€§å¿…é¡»æ˜¯åªè¯»çš„ ã€‚

### 2.2 ç»“æ„åŒ–å¹¶å‘ä¸ `Task`
Swift 5.5 å¼•å…¥çš„å¹¶å‘æ¨¡å‹ï¼Œå…¶æ ¸å¿ƒåœ¨äº **`Task` ç±»å‹ï¼Œå®ƒä»£è¡¨äº†ä¸€ä¸ªå¼‚æ­¥å·¥ä½œçš„å•å…ƒ** ã€‚è¿™ä¸ªæ¨¡å‹æ—¨åœ¨ç®€åŒ–å¼‚æ­¥æ“ä½œçš„å¤„ç†ï¼Œæé«˜ä»£ç çš„å¯è¯»æ€§å’Œå¯ç»´æŠ¤æ€§ã€‚`Task` ä¸ä»…ä»…æ˜¯ä¸€ä¸ªç®€å•çš„åå°ä»»åŠ¡å°è£…ï¼Œå®ƒæ›´æ˜¯ä¸€ä¸ªç»“æ„åŒ–çš„å¹¶å‘ç®¡ç†å·¥å…·ã€‚å¼€å‘è€…å¯ä»¥é€šè¿‡ `Task` API æ¥åˆ›å»ºã€ç®¡ç†å’Œåè°ƒå¼‚æ­¥ä»»åŠ¡ã€‚Swift çš„å¹¶å‘æ¨¡å‹å¼ºè°ƒâ€œ**ç»“æ„åŒ–å¹¶å‘**â€ï¼Œè¿™æ„å‘³ç€ä»»åŠ¡çš„ç”Ÿå‘½å‘¨æœŸä¸å…¶åˆ›å»ºçš„ä½œç”¨åŸŸç´§å¯†ç›¸å…³ï¼Œè¿™æœ‰åŠ©äºé¿å…å¸¸è§çš„å¹¶å‘é—®é¢˜ï¼Œå¦‚èµ„æºæ³„æ¼å’Œç«æ€æ¡ä»¶ ã€‚ä¾‹å¦‚ï¼Œåœ¨ä¸€ä¸ªå‡½æ•°ä¸­å¯åŠ¨ä¸€ä¸ª `Task`ï¼Œå½“è¿™ä¸ªå‡½æ•°è¿”å›æ—¶ï¼Œå…¶åˆ›å»ºçš„æ‰€æœ‰ `Task` ä¹Ÿåº”è¯¥å®Œæˆæˆ–è¢«å–æ¶ˆï¼Œè¿™ç§ç»“æ„åŒ–çš„ç”Ÿå‘½å‘¨æœŸç®¡ç†ä½¿å¾—å¼‚æ­¥ä»£ç çš„é€»è¾‘æ›´åŠ æ¸…æ™°ã€‚`Task` çš„è®¾è®¡å…è®¸å¼€å‘è€…ä»¥æ›´è‡ªç„¶çš„æ–¹å¼ç¼–å†™å¼‚æ­¥ä»£ç ï¼Œä½¿å…¶çœ‹èµ·æ¥æ›´åƒæ˜¯åŒæ­¥ä»£ç ï¼Œä»è€Œé™ä½äº†ç†è§£å’Œè°ƒè¯•çš„å¤æ‚åº¦ ã€‚

`Task` å¯ä»¥æºå¸¦è¿”å›å€¼ï¼Œä¹Ÿå¯ä»¥æŠ›å‡ºé”™è¯¯ï¼Œè¿™ä½¿å¾—å¼‚æ­¥æ“ä½œçš„ç»“æœå¤„ç†æ›´åŠ æ–¹ä¾¿ã€‚Swift å¹¶å‘æ¨¡å‹ä¸­çš„ `Task` è¿˜æ”¯æŒå±‚çº§å…³ç³»ï¼Œå³ä¸€ä¸ª `Task` å¯ä»¥åˆ›å»ºå­ `Task`ï¼Œè¿™ç§å±‚çº§ç»“æ„æœ‰åŠ©äºç®¡ç†ä»»åŠ¡çš„å–æ¶ˆå’Œä¼˜å…ˆçº§ç»§æ‰¿ã€‚ä¾‹å¦‚ï¼Œå¦‚æœä¸€ä¸ªçˆ¶ `Task` è¢«å–æ¶ˆï¼Œé‚£ä¹ˆå®ƒçš„æ‰€æœ‰å­ `Task` ä¹Ÿä¼šè¢«è‡ªåŠ¨å–æ¶ˆï¼Œè¿™ä¸ºå¤æ‚çš„å¼‚æ­¥æ“ä½œæä¾›äº†ä¾¿æ·çš„èµ„æºç®¡ç†å’Œé”™è¯¯å¤„ç†æœºåˆ¶ ã€‚æ­¤å¤–ï¼Œ`Task` è¿˜æä¾›äº†è¯¸å¦‚ `Task.sleep()` å’Œ `Task.detached` ç­‰APIï¼Œç”¨äºæ‰§è¡Œå¸¸è§çš„å¼‚æ­¥æ“ä½œæˆ–åˆ›å»ºä¸å½“å‰ä»»åŠ¡æ— å…³çš„ç‹¬ç«‹ä»»åŠ¡ ã€‚Swift çš„å¹¶å‘æ¨¡å‹è¿˜å¼•å…¥äº† **`async let` ç»‘å®šå’Œ `TaskGroup`** ç­‰æ¦‚å¿µï¼Œç”¨äºæ›´ä¾¿æ·åœ°å¤„ç†å¹¶å‘æ‰§è¡Œå¤šä¸ªå¼‚æ­¥ä»»åŠ¡ ã€‚`async let` å…è®¸åœ¨åŒä¸€ä¸ªä½œç”¨åŸŸå†…å¹¶å‘å¯åŠ¨å¤šä¸ªå¼‚æ­¥æ“ä½œï¼Œå¹¶ç­‰å¾…å®ƒä»¬å…¨éƒ¨å®Œæˆã€‚è€Œ `TaskGroup` åˆ™æä¾›äº†ä¸€ç§æ›´çµæ´»çš„æ–¹å¼æ¥ç®¡ç†ä¸€ç»„åŠ¨æ€æ•°é‡çš„å¹¶å‘ä»»åŠ¡ã€‚è¿™äº›æœºåˆ¶éƒ½æ„å»ºåœ¨ `Task` çš„åŸºç¡€ä¹‹ä¸Šï¼Œå…±åŒæ„æˆäº† Swift ç»“æ„åŒ–å¹¶å‘çš„æ ¸å¿ƒã€‚

### 2.3 å¹¶å‘æ‰§è¡Œä¸æ€§èƒ½
Swift çš„ `async/await` æœºåˆ¶æ—¨åœ¨æé«˜å¹¶å‘æ‰§è¡Œçš„æ•ˆç‡å’Œä»£ç çš„å¯è¯»æ€§ã€‚é€šè¿‡ `await` å…³é”®å­—ï¼Œå¼‚æ­¥å‡½æ•°å¯ä»¥åœ¨ç­‰å¾…æ“ä½œå®Œæˆæ—¶æŒ‚èµ·ï¼Œä»è€Œé‡Šæ”¾å½“å‰çº¿ç¨‹ä»¥ä¾›å…¶ä»–ä»»åŠ¡ä½¿ç”¨ï¼Œè¿™é¿å…äº†çº¿ç¨‹é˜»å¡ï¼Œæé«˜äº†ç³»ç»Ÿçš„æ•´ä½“ååé‡ ã€‚å½“ä½¿ç”¨ `async let` æˆ– `TaskGroup` å¯åŠ¨å¤šä¸ªå¹¶å‘ä»»åŠ¡æ—¶ï¼Œå¦‚æœç³»ç»Ÿèµ„æºå…è®¸ï¼Œè¿™äº›ä»»åŠ¡å¯ä»¥çœŸæ­£å¹¶è¡Œæ‰§è¡Œï¼Œä»è€Œæ˜¾è‘—ç¼©çŸ­æ€»æ‰§è¡Œæ—¶é—´ ã€‚ä¾‹å¦‚ï¼Œåœ¨ä¸€ä¸ªæ¡ˆä¾‹ä¸­ï¼Œä½¿ç”¨ `async/await` å¹¶å‘è·å–ä¸‰ä¸ªåŸå¸‚çš„æ•°æ®ï¼ˆå¾ªç¯50æ¬¡ï¼‰ä»…éœ€çº¦0.00047ç§’ï¼Œè€Œä½¿ç”¨ä¼ ç»Ÿçš„â€œå›è°ƒåœ°ç‹±â€æ–¹å¼ä¸²è¡Œè·å–å•ä¸ªåŸå¸‚50æ¬¡æ•°æ®åˆ™éœ€è¦çº¦0.017ç§’ï¼Œæ€§èƒ½æå‡æ˜¾è‘— ã€‚Swift è¿è¡Œæ—¶ä¼šç®¡ç†ä¸€ä¸ªåä½œå¼çº¿ç¨‹æ± ï¼Œé€šå¸¸çº¿ç¨‹æ•°é‡ä¸ CPU æ ¸å¿ƒæ•°ç›¸å…³ ã€‚åœ¨ Swift å¹¶å‘æ¨¡å‹ä¸­ï¼Œ`async` å‡½æ•°åœ¨ç¼–è¯‘æ—¶ä¼šè¢«è½¬æ¢ä¸ºä¸€ä¸ª**çŠ¶æ€æœºï¼ˆstate machineï¼‰** ã€‚æ¯ä¸ª `await` è¡¨è¾¾å¼éƒ½ä»£è¡¨ä¸€ä¸ªæ½œåœ¨çš„ä¸­æ–­ç‚¹ï¼Œç¼–è¯‘å™¨ä¼šå°†å‡½æ•°åˆ†å‰²æˆå¤šä¸ªå¯ç‹¬ç«‹è°ƒåº¦çš„â€œä½œä¸šï¼ˆjobsï¼‰â€æˆ–â€œéƒ¨åˆ†ä»»åŠ¡ï¼ˆpartial tasksï¼‰â€ ã€‚

ç„¶è€Œï¼Œéœ€è¦æ³¨æ„çš„æ˜¯ï¼Œå°†å‡½æ•°æ ‡è®°ä¸º `async` å¹¶éæ²¡æœ‰ä»£ä»·ã€‚å¼‚æ­¥å‡½æ•°åœ¨å†…éƒ¨ä½¿ç”¨ä¸åŒæ­¥å‡½æ•°ä¸åŒçš„è°ƒç”¨çº¦å®šï¼Œè¿™å¯èƒ½å¯¼è‡´è½»å¾®çš„æ€§èƒ½å¼€é”€ï¼Œå³ä½¿å‡½æ•°å®é™…ä¸Šå¹¶æœªæŒ‚èµ· ã€‚ç¼–è¯‘å™¨åœ¨ç¼–è¯‘æ—¶æ— æ³•ç¡®å®š `await` è°ƒç”¨æ˜¯å¦ä¼šçœŸæ­£æŒ‚èµ·ï¼Œå› æ­¤ç»Ÿä¸€é‡‡ç”¨è¿™ç§å¼€é”€ç¨å¤§çš„è°ƒç”¨çº¦å®š ã€‚å¦‚æœå¼‚æ­¥å‡½æ•°ç¡®å®å‘ç”Ÿäº†æŒ‚èµ·ï¼ŒæŒ‚èµ·å’Œæ¢å¤æ“ä½œæœ¬èº«ä¹Ÿä¼šå¸¦æ¥ä¸€å®šçš„æ€§èƒ½æˆæœ¬ï¼Œä½†è¿™é€šå¸¸ä¸é€šè¿‡å¹¶å‘è·å¾—çš„æ€§èƒ½æå‡ç›¸æ¯”æ˜¯å¾®ä¸è¶³é“çš„ ã€‚é‡è¦çš„æ˜¯ï¼Œ`await` å¹¶ä¸ä¼šåƒæŸäº›æ—§çš„å¹¶å‘æ¨¡å¼ï¼ˆå¦‚ `DispatchQueue.main.async { â€¦ }`ï¼‰é‚£æ ·ç­‰å¾…ä¸€ä¸ªè¿è¡Œå¾ªç¯ï¼ˆrunloopï¼‰çš„ tick æ‰ç»§ç»­æ‰§è¡Œï¼Œå¦‚æœä»£ç æ²¡æœ‰æŒ‚èµ·ï¼Œå®ƒä¼šç«‹å³æ‰§è¡Œ ã€‚åœ¨å•æ ¸å¤„ç†å™¨ä¸Šï¼Œè™½ç„¶çœŸæ­£çš„å¹¶è¡Œæ€§æ— æ³•å®ç°ï¼Œä½† `async/await` ä»ç„¶å¯ä»¥é€šè¿‡åä½œå¼å¹¶å‘å¸¦æ¥å¥½å¤„ï¼Œå°¤å…¶æ˜¯åœ¨å¤„ç† I/O å¯†é›†å‹ä»»åŠ¡æ—¶ ã€‚ç„¶è€Œï¼Œå¯¹äº CPU å¯†é›†å‹çš„åŒæ­¥ä»£ç ï¼Œåœ¨å•æ ¸ä¸Šä½¿ç”¨ `async/await` å¯èƒ½åè€Œä¼šå› ä¸ºæŒ‚èµ·ç‚¹çš„å¼€é”€è€Œé™ä½æ€§èƒ½ï¼Œé™¤éåœ¨åŒæ­¥ä»£ç ä¸­å‘¨æœŸæ€§åœ°è°ƒç”¨ `await Task.yield()` æ¥ä¸»åŠ¨è®©å‡ºæ‰§è¡Œæƒ ã€‚å› æ­¤ï¼Œåœ¨ä½¿ç”¨ `async/await` æ—¶ï¼Œåº”é¿å…ä¸å¿…è¦çš„ `async` æ ‡è®°ï¼Œå¹¶è°¨æ…å¤„ç†å¯èƒ½é˜»å¡çº¿ç¨‹çš„åŒæ­¥æ“ä½œï¼Œå°¤å…¶æ˜¯åœ¨ Swift å¹¶å‘æ¨¡å‹çš„åä½œçº¿ç¨‹æ± ä¸­ ã€‚

### 2.4 é”™è¯¯å¤„ç†æœºåˆ¶
Swift çš„ `async/await` æœºåˆ¶ä¸è¯­è¨€åŸç”Ÿçš„é”™è¯¯å¤„ç†æ¨¡å‹ç´§å¯†é›†æˆï¼Œä½¿å¾—å¼‚æ­¥ä»£ç ä¸­çš„é”™è¯¯å¤„ç†æ›´åŠ ç›´è§‚å’Œå®‰å…¨ ã€‚å¼‚æ­¥å‡½æ•°å¯ä»¥é€šè¿‡åœ¨å£°æ˜ä¸­æ·»åŠ  `throws` å…³é”®å­—æ¥è¡¨æ˜å…¶å¯èƒ½æŠ›å‡ºé”™è¯¯ï¼Œä¾‹å¦‚ `func fetchData() async throws -> Data` ã€‚è°ƒç”¨è¿™æ ·çš„å¼‚æ­¥å‡½æ•°æ—¶ï¼Œéœ€è¦ä½¿ç”¨ `try await` ç»„åˆå…³é”®å­— ã€‚é”™è¯¯å¤„ç†é€šå¸¸é€šè¿‡ **`do-catch` è¯­å¥å—**æ¥å®Œæˆï¼Œè¿™ä¸åŒæ­¥ä»£ç ä¸­çš„é”™è¯¯å¤„ç†æ–¹å¼ä¸€è‡´ ã€‚åœ¨ `do` å—ä¸­ï¼Œå¯ä»¥è°ƒç”¨å¯èƒ½æŠ›å‡ºé”™è¯¯çš„å¼‚æ­¥å‡½æ•°ï¼Œå¹¶ä½¿ç”¨ `try await`ã€‚å¦‚æœå‡½æ•°æŠ›å‡ºé”™è¯¯ï¼Œæ‰§è¡Œä¼šç«‹å³è·³è½¬åˆ°ç›¸åº”çš„ `catch` å—ï¼Œå¼€å‘è€…å¯ä»¥åœ¨è¿™é‡Œå¤„ç†é”™è¯¯æˆ–å°†å…¶ç»§ç»­å‘ä¸Šä¼ é€’ ã€‚è¿™ç§å¤„ç†æ–¹å¼æ¯”åŸºäºå›è°ƒçš„å¼‚æ­¥ä»£ç ä¸­å¸¸è§çš„ `Result` ç±»å‹æˆ–åµŒå¥—çš„é”™è¯¯æ£€æŸ¥é€»è¾‘æ›´ä¸ºæ¸…æ™°å’Œç®€æ´ ã€‚

```swift
do {
    let data = try await fetchDataFromServer()
    // å¤„ç† data
} catch {
    // å¤„ç†é”™è¯¯
    print("An error occurred: \(error)")
}
```
æ­¤å¤–ï¼ŒSwift è¿˜æä¾›äº† `try?` å’Œ `try!` ä¸¤ç§ç®€åŒ–çš„é”™è¯¯å¤„ç†æ–¹å¼ã€‚`try?` ä¼šå°†é”™è¯¯è½¬æ¢ä¸ºå¯é€‰å€¼ï¼Œå¦‚æœå‘ç”Ÿé”™è¯¯åˆ™ç»“æœä¸º `nil`ã€‚`try!` åˆ™ä¼šåœ¨å‘ç”Ÿé”™è¯¯æ—¶è§¦å‘è¿è¡Œæ—¶é”™è¯¯ï¼Œåº”ä»…åœ¨ç¡®å®šæ“ä½œä¸ä¼šå¤±è´¥æ—¶ä½¿ç”¨ ã€‚è¿™ç§ç»Ÿä¸€çš„é”™è¯¯å¤„ç†æœºåˆ¶ï¼Œä½¿å¾—å¼‚æ­¥ä»£ç çš„ç¼–å†™å’Œé˜…è¯»æ›´åŠ æµç•…ï¼Œå‡å°‘äº†å› é”™è¯¯å¤„ç†ä¸å½“è€Œå¼•å…¥çš„ bugã€‚

### 2.5 é˜»å¡è¡Œä¸ºä¸ä»»åŠ¡æŒ‚èµ·
åœ¨ Swift çš„ `async/await` æ¨¡å‹ä¸­ï¼Œ**`await` å…³é”®å­—çš„ä½¿ç”¨æ˜¯å®ç°éé˜»å¡å¼‚æ­¥æ“ä½œçš„å…³é”®**ã€‚å½“ä¸€ä¸ªå¼‚æ­¥å‡½æ•°æ‰§è¡Œåˆ° `await` è¡¨è¾¾å¼æ—¶ï¼Œå½“å‰ä»»åŠ¡ï¼ˆ`Task`ï¼‰ä¼šè¢«**æŒ‚èµ·ï¼ˆsuspendedï¼‰**ï¼Œè€Œä¸æ˜¯**é˜»å¡ï¼ˆblockingï¼‰**å½“å‰çº¿ç¨‹ ã€‚è¿™æ„å‘³ç€æ‰§è¡Œè¯¥ä»»åŠ¡çš„çº¿ç¨‹å¯ä»¥è¢«é‡Šæ”¾å‡ºæ¥å»å¤„ç†å…¶ä»–å·¥ä½œï¼Œä¾‹å¦‚å“åº” UI äº‹ä»¶æˆ–æ‰§è¡Œå…¶ä»–å¼‚æ­¥ä»»åŠ¡ï¼Œä»è€Œä¿è¯äº†åº”ç”¨ç¨‹åºçš„å“åº”æ€§å’Œæ•´ä½“æ€§èƒ½ ã€‚è¿™ä¸ä¼ ç»Ÿçš„åŒæ­¥ç¼–ç¨‹ä¸­ï¼Œé•¿æ—¶é—´è¿è¡Œçš„ä»»åŠ¡ä¼šç‹¬å çº¿ç¨‹å¯¼è‡´ç•Œé¢å†»ç»“æˆ–æ— æ³•å¤„ç†å…¶ä»–è¯·æ±‚çš„æƒ…å†µå½¢æˆäº†é²œæ˜å¯¹æ¯” ã€‚ä»»åŠ¡æŒ‚èµ·æ˜¯ Swift å¹¶å‘æ¨¡å‹ä¸­çš„ä¸€ä¸ªæ ¸å¿ƒæ¦‚å¿µï¼Œå®ƒå…è®¸åœ¨ç­‰å¾…å¼‚æ­¥æ“ä½œï¼ˆå¦‚ç½‘ç»œè¯·æ±‚ã€æ–‡ä»¶ I/O æˆ–å¤æ‚è®¡ç®—ï¼‰å®Œæˆçš„è¿‡ç¨‹ä¸­ï¼Œæœ‰æ•ˆåœ°åˆ©ç”¨ç³»ç»Ÿèµ„æºã€‚å½“ä¸€ä¸ªè¢« `await` æ ‡è®°çš„å¼‚æ­¥æ“ä½œå®Œæˆåï¼Œç³»ç»Ÿä¼šåœ¨åˆé€‚çš„æ—¶æœºæ¢å¤ä¹‹å‰æŒ‚èµ·çš„ä»»åŠ¡ï¼Œç»§ç»­æ‰§è¡Œåç»­ä»£ç  ã€‚è¿™ä¸ªè¿‡ç¨‹å¯¹äºå¼€å‘è€…æ¥è¯´æ˜¯é€æ˜çš„ï¼Œä»£ç çš„é€»è¾‘æµä»ç„¶ä¿æŒæ¸…æ™°ï¼Œå°±åƒåœ¨ç¼–å†™åŒæ­¥ä»£ç ä¸€æ ·ã€‚

é‡è¦çš„æ˜¯ï¼Œ**`await` å¹¶ä¸ä¼šå¯¼è‡´å½“å‰çº¿ç¨‹ä¼‘çœ æˆ–å¿™ç­‰å¾…**ï¼Œè€Œæ˜¯å°†æ§åˆ¶æƒäº¤è¿˜ç»™ Swift çš„å¹¶å‘è¿è¡Œæ—¶ç³»ç»Ÿï¼Œç”±è¿è¡Œæ—¶ç³»ç»Ÿæ¥è°ƒåº¦å…¶ä»–å¯æ‰§è¡Œçš„ä»»åŠ¡ã€‚è¿™ç§æœºåˆ¶ç¡®ä¿äº†å³ä½¿åœ¨å•ä¸€çº¿ç¨‹ä¸Šï¼Œä¹Ÿèƒ½é€šè¿‡ä»»åŠ¡åˆ‡æ¢æ¥å®ç°å¹¶å‘æ•ˆæœã€‚ä¾‹å¦‚ï¼Œåœ¨ iOS åº”ç”¨çš„ä¸»çº¿ç¨‹ä¸Šï¼Œå¦‚æœä¸€ä¸ªå¼‚æ­¥ä»»åŠ¡è¢«æŒ‚èµ·ï¼Œä¸»çº¿ç¨‹å¯ä»¥ç«‹å³å»å¤„ç†ç”¨æˆ·äº¤äº’æˆ–æ›´æ–° UIï¼Œè€Œä¸ä¼šè¢«é•¿æ—¶é—´é˜»å¡ï¼Œè¿™å¯¹äºä¿æŒåº”ç”¨çš„æµç•…æ€§è‡³å…³é‡è¦ ã€‚Swift çš„å¹¶å‘æ¨¡å‹é€šè¿‡è¿™ç§éé˜»å¡çš„æŒ‚èµ·æœºåˆ¶ï¼Œä½¿å¾—å¼€å‘è€…å¯ä»¥ç¼–å†™å‡ºæ—¢é«˜æ•ˆåˆæ˜“äºç†è§£çš„å¼‚æ­¥ä»£ç ã€‚å¼€å‘è€…ä¸å†éœ€è¦æ‰‹åŠ¨ç®¡ç†çº¿ç¨‹æˆ–ä½¿ç”¨å¤æ‚çš„å›è°ƒå‡½æ•°æ¥å¤„ç†å¼‚æ­¥æ“ä½œçš„ç»“æœã€‚`async/await` è¯­æ³•ç³–çš„å¼•å…¥ï¼Œä½¿å¾—å¼‚æ­¥ä»£ç çš„ç¼–å†™æ–¹å¼æ›´æ¥è¿‘åŒæ­¥ä»£ç çš„ç›´è§‚æ€§ï¼Œæå¤§åœ°é™ä½äº†å¼‚æ­¥ç¼–ç¨‹çš„é—¨æ§›å’Œå‡ºé”™çš„å¯èƒ½æ€§ ã€‚éœ€è¦æ³¨æ„çš„æ˜¯ï¼Œè™½ç„¶ `await` æŒ‚èµ·ä»»åŠ¡è€Œä¸é˜»å¡çº¿ç¨‹ï¼Œä½†åœ¨ä¸€ä¸ª `Task` å†…éƒ¨ï¼Œå¤šä¸ªè¿ç»­çš„ `await` è°ƒç”¨é»˜è®¤æ˜¯é¡ºåºæ‰§è¡Œçš„ï¼Œå³ä¸€ä¸ªå¼‚æ­¥æ“ä½œå®Œæˆåæ‰ä¼šå¼€å§‹ä¸‹ä¸€ä¸ª ã€‚è‹¥è¦å®ç°å¹¶å‘æ‰§è¡Œå¤šä¸ªå¼‚æ­¥æ“ä½œï¼Œåˆ™éœ€è¦ä½¿ç”¨ `async let` æˆ– `TaskGroup` ç­‰ç»“æ„åŒ–å¹¶å‘ç‰¹æ€§ ã€‚

## 3. TypeScript (JavaScript) Async/Await æœºåˆ¶
TypeScript (ä»¥åŠå…¶åº•å±‚çš„ JavaScript) ä¸­çš„ `async/await` æœºåˆ¶æ˜¯å»ºç«‹åœ¨ `Promise` å¯¹è±¡ä¹‹ä¸Šçš„è¯­æ³•ç³–ï¼Œæ—¨åœ¨ç®€åŒ–å¼‚æ­¥æ“ä½œçš„å¤„ç†ï¼Œä½¿ä»£ç æ›´æ˜“äºé˜…è¯»å’Œç»´æŠ¤ ã€‚

### 3.1 å¼‚æ­¥å‡½æ•°çš„å®šä¹‰ä¸è°ƒç”¨
åœ¨ TypeScript (ä»¥åŠ JavaScript) ä¸­ï¼Œ**å¼‚æ­¥å‡½æ•°æ˜¯é€šè¿‡åœ¨å‡½æ•°å£°æ˜å‰æ·»åŠ  `async` å…³é”®å­—æ¥å®šä¹‰çš„** ã€‚è¿™ä¸ª `async` å…³é”®å­—ä¸»è¦å®Œæˆä¸¤ä»¶äº‹æƒ…ï¼šé¦–å…ˆï¼Œå®ƒç¡®ä¿å‡½æ•°å§‹ç»ˆè¿”å›ä¸€ä¸ª Promise å¯¹è±¡ã€‚å¦‚æœå‡½æ•°æ˜¾å¼è¿”å›ä¸€ä¸ªå€¼ï¼Œè¯¥å€¼ä¼šè‡ªåŠ¨è¢«åŒ…è£…æˆä¸€ä¸ªå·²è§£å†³çš„ (resolved) Promiseï¼›å¦‚æœå‡½æ•°æŠ›å‡ºé”™è¯¯ï¼Œåˆ™ä¼šè¿”å›ä¸€ä¸ªè¢«æ‹’ç»çš„ (rejected) Promise ã€‚å…¶æ¬¡ï¼Œå®ƒå…è®¸åœ¨å‡½æ•°ä½“å†…ä½¿ç”¨ `await` å…³é”®å­—ã€‚`await` æ“ä½œç¬¦ç”¨äºç­‰å¾…ä¸€ä¸ª Promise å®Œæˆï¼ˆæ— è®ºæ˜¯è§£å†³è¿˜æ˜¯æ‹’ç»ï¼‰ã€‚å½“ `await` ä¸€ä¸ª Promise æ—¶ï¼Œå‡½æ•°çš„æ‰§è¡Œä¼šæš‚åœï¼Œä½†**ä¸ä¼šé˜»å¡ JavaScript çš„å•çº¿ç¨‹äº‹ä»¶å¾ªç¯** ã€‚ä¸€æ—¦ Promise å®Œæˆï¼Œå‡½æ•°çš„æ‰§è¡Œä¼šæ¢å¤ï¼Œå¹¶ä¸” `await` è¡¨è¾¾å¼ä¼šè¿”å› Promise çš„ç»“æœå€¼ï¼ˆå¦‚æœ Promise è¢«è§£å†³ï¼‰æˆ–æŠ›å‡ºé”™è¯¯ï¼ˆå¦‚æœ Promise è¢«æ‹’ç»ï¼‰ã€‚è°ƒç”¨å¼‚æ­¥å‡½æ•°æ—¶ï¼Œå¯ä»¥ç›´æ¥åƒè°ƒç”¨æ™®é€šå‡½æ•°ä¸€æ ·è°ƒç”¨å®ƒï¼Œä½†ç”±äºå®ƒè¿”å›çš„æ˜¯ä¸€ä¸ª Promiseï¼Œå› æ­¤é€šå¸¸éœ€è¦ä½¿ç”¨ `await` æ¥è·å–å…¶æœ€ç»ˆç»“æœï¼Œæˆ–è€…ä½¿ç”¨ `.then()` å’Œ `.catch()` æ–¹æ³•æ¥å¤„ç† Promise çš„è§£å†³å’Œæ‹’ç»ã€‚

### 3.2 åŸºäº `Promise` çš„å®ç°
TypeScript (ä»¥åŠ JavaScript) ä¸­çš„ `async/await` æœºåˆ¶æ˜¯**å»ºç«‹åœ¨ `Promise` å¯¹è±¡ä¹‹ä¸Šçš„è¯­æ³•ç³–** ã€‚`Promise` ä»£è¡¨äº†ä¸€ä¸ªå¼‚æ­¥æ“ä½œçš„æœ€ç»ˆå®Œæˆæˆ–å¤±è´¥åŠå…¶ç»“æœå€¼ã€‚`async` å…³é”®å­—ç”¨äºå£°æ˜ä¸€ä¸ªå‡½æ•°æ˜¯å¼‚æ­¥çš„ï¼Œè¿™æ„å‘³ç€è¯¥å‡½æ•°ä¼šè¿”å›ä¸€ä¸ª `Promise`ã€‚å¦‚æœ `async` å‡½æ•°æ˜¾å¼è¿”å›ä¸€ä¸ªå€¼ï¼Œè¯¥å€¼ä¼šè¢«è‡ªåŠ¨åŒ…è£…æˆä¸€ä¸ªå·²è§£å†³ (resolved) çš„ `Promise`ï¼›å¦‚æœ `async` å‡½æ•°æŠ›å‡ºé”™è¯¯ï¼Œåˆ™ä¼šè¿”å›ä¸€ä¸ªå·²æ‹’ç» (rejected) çš„ `Promise`ã€‚è¿™ç§è®¾è®¡ä½¿å¾— `async` å‡½æ•°å¯ä»¥æ–¹ä¾¿åœ°ä¸ç°æœ‰çš„åŸºäº `Promise` çš„ API å’Œåº“è¿›è¡Œäº¤äº’ï¼ŒåŒæ—¶ä¹Ÿä½¿å¾—å¼‚æ­¥æ“ä½œçš„é“¾å¼è°ƒç”¨å’Œé”™è¯¯ä¼ æ’­æ›´åŠ ç›´è§‚ã€‚`await` å…³é”®å­—åˆ™ç”¨äºç­‰å¾…ä¸€ä¸ª `Promise` å®Œæˆã€‚å®ƒåªèƒ½åœ¨ `async` å‡½æ•°å†…éƒ¨ä½¿ç”¨ã€‚å½“ `await` ä¸€ä¸ª `Promise` æ—¶ï¼Œ`async` å‡½æ•°çš„æ‰§è¡Œä¼šæš‚åœï¼Œç›´åˆ°è¯¥ `Promise` è¢«è§£å†³æˆ–æ‹’ç»ã€‚å¦‚æœ `Promise` è¢«è§£å†³ï¼Œ`await` è¡¨è¾¾å¼ä¼šè¿”å› `Promise` è§£å†³çš„å€¼ï¼›å¦‚æœ `Promise` è¢«æ‹’ç»ï¼Œ`await` è¡¨è¾¾å¼ä¼šæŠ›å‡ºæ‹’ç»çš„åŸå› ï¼ˆé€šå¸¸æ˜¯ä¸€ä¸ªé”™è¯¯å¯¹è±¡ï¼‰ã€‚è¿™ä½¿å¾—å¼‚æ­¥ä»£ç çš„ç¼–å†™é£æ ¼æ›´æ¥è¿‘äºåŒæ­¥ä»£ç ï¼Œé¿å…äº†ä¼ ç»Ÿå›è°ƒå‡½æ•°å¸¦æ¥çš„â€œå›è°ƒåœ°ç‹±â€é—®é¢˜ï¼Œæé«˜äº†ä»£ç çš„å¯è¯»æ€§å’Œå¯ç»´æŠ¤æ€§ ã€‚

### 3.3 äº‹ä»¶å¾ªç¯ä¸éé˜»å¡ I/O
JavaScript æ˜¯å•çº¿ç¨‹çš„ï¼Œè¿™æ„å‘³ç€å®ƒä¸€æ¬¡åªèƒ½æ‰§è¡Œä¸€æ®µä»£ç ã€‚ä¸ºäº†å¤„ç†å¼‚æ­¥æ“ä½œï¼ˆå¦‚ I/O æ“ä½œã€å®šæ—¶å™¨ç­‰ï¼‰è€Œä¸é˜»å¡ä¸»çº¿ç¨‹ï¼ŒJavaScript å¼•æ“ä¾èµ–äº**äº‹ä»¶å¾ªç¯ (Event Loop)** æœºåˆ¶ ã€‚äº‹ä»¶å¾ªç¯æŒç»­æ£€æŸ¥è°ƒç”¨æ ˆ (Call Stack) å’Œä»»åŠ¡é˜Ÿåˆ— (Task Queuesï¼ŒåŒ…æ‹¬å¾®ä»»åŠ¡é˜Ÿåˆ— Microtask Queue å’Œå®ä»»åŠ¡é˜Ÿåˆ— Macrotask Queue)ã€‚å½“è°ƒç”¨æ ˆä¸ºç©ºæ—¶ï¼Œäº‹ä»¶å¾ªç¯ä¼šä»ä»»åŠ¡é˜Ÿåˆ—ä¸­å–å‡ºä¸€ä¸ªä»»åŠ¡å¹¶å°†å…¶æ¨å…¥è°ƒç”¨æ ˆæ‰§è¡Œã€‚`async/await` çš„è¡Œä¸ºä¸è¿™ä¸ªäº‹ä»¶å¾ªç¯æ¨¡å‹ç´§å¯†ç›¸å…³ã€‚å½“ä¸€ä¸ª `async` å‡½æ•°æ‰§è¡Œåˆ° `await` è¡¨è¾¾å¼æ—¶ï¼Œå¦‚æœç­‰å¾…çš„ Promise å°šæœªå®Œæˆï¼Œè¯¥ `async` å‡½æ•°ä¼šæš‚åœæ‰§è¡Œï¼Œå¹¶ä¸”å…¶åç»­ä»£ç ä¼šè¢«å®‰æ’ä¸ºä¸€ä¸ªå¾®ä»»åŠ¡ï¼ˆé€šå¸¸ï¼ŒPromise çš„å›è°ƒå±äºå¾®ä»»åŠ¡ï¼‰ï¼Œç­‰å¾… Promise è§£å†³åæ‰§è¡Œ ã€‚é‡è¦çš„æ˜¯ï¼Œ**è¿™ä¸ªæš‚åœæ“ä½œä¸ä¼šé˜»å¡äº‹ä»¶å¾ªç¯æœ¬èº«**ã€‚äº‹ä»¶å¾ªç¯åœ¨ `async` å‡½æ•°ç­‰å¾…æœŸé—´ä»ç„¶æ˜¯æ´»åŠ¨çš„ï¼Œå¯ä»¥ç»§ç»­å¤„ç†å…¶ä»–ä»»åŠ¡ï¼Œå¦‚ UI æ¸²æŸ“ã€å¤„ç†ç”¨æˆ·äº¤äº’æˆ–å…¶ä»–å¼‚æ­¥æ“ä½œçš„å›è°ƒ ã€‚è¿™ç§éé˜»å¡è¡Œä¸ºå¯¹äºæ„å»ºå“åº”å¼çš„åº”ç”¨ç¨‹åºè‡³å…³é‡è¦ï¼Œç¡®ä¿äº† JavaScript åº”ç”¨å³ä½¿åœ¨å¤„ç†è€—æ—¶çš„å¼‚æ­¥æ“ä½œæ—¶ä¹Ÿèƒ½ä¿æŒæµç•…å’Œå“åº”ã€‚

### 3.4 é”™è¯¯å¤„ç†æœºåˆ¶
åœ¨ TypeScript (ä»¥åŠ JavaScript) ä¸­ï¼Œ`async/await` çš„é”™è¯¯å¤„ç†æœºåˆ¶ä¸»è¦ä¾èµ–äºä¼ ç»Ÿçš„ **`try...catch` è¯­å¥å—** ã€‚å½“ä¸€ä¸ª `async` å‡½æ•°å†…éƒ¨ä½¿ç”¨ `await` ç­‰å¾…ä¸€ä¸ª `Promise` æ—¶ï¼Œå¦‚æœè¯¥ `Promise` è¢«æ‹’ç» (rejected)ï¼Œ`await` è¡¨è¾¾å¼ä¼šæŠ›å‡ºä¸€ä¸ªé”™è¯¯ã€‚è¿™ä¸ªé”™è¯¯å¯ä»¥è¢«åŒ…è£¹è¯¥ `await` è¡¨è¾¾å¼çš„ `try...catch` å—æ•è·ã€‚è¿™ç§é”™è¯¯å¤„ç†æ–¹å¼ä¸åŒæ­¥ä»£ç ä¸­çš„é”™è¯¯å¤„ç†éå¸¸ç›¸ä¼¼ï¼Œä½¿å¾—å¼‚æ­¥ä»£ç çš„é”™è¯¯å¤„ç†é€»è¾‘æ›´åŠ é›†ä¸­å’Œæ˜“äºç†è§£ ã€‚ä¾‹å¦‚ï¼Œå¦‚æœä¸€ä¸ªç½‘ç»œè¯·æ±‚å¤±è´¥ï¼Œç›¸å…³çš„ `fetch` è°ƒç”¨è¿”å›çš„ `Promise` ä¼šè¢«æ‹’ç»ï¼Œ`await fetch(...)` å°±ä¼šæŠ›å‡ºé”™è¯¯ï¼Œå¼€å‘è€…å¯ä»¥åœ¨ `catch` å—ä¸­å¤„ç†è¿™ä¸ªç½‘ç»œé”™è¯¯ã€‚è™½ç„¶ `try...catch` æ˜¯å¤„ç† `async/await` é”™è¯¯çš„ä¸»è¦æ–¹å¼ï¼Œä½†éœ€è¦æ³¨æ„çš„æ˜¯ï¼Œå¦‚æœ `async` å‡½æ•°å†…éƒ¨æ²¡æœ‰ä½¿ç”¨ `try...catch` æ¥æ•è· `await` è¡¨è¾¾å¼çš„é”™è¯¯ï¼Œæˆ–è€… `Promise` çš„æ‹’ç»å‘ç”Ÿåœ¨ `try...catch` å—ä¹‹å¤–ï¼Œé‚£ä¹ˆè¿™ä¸ª `async` å‡½æ•°è¿”å›çš„ `Promise` æœ¬èº«å°†ä¼šè¢«æ‹’ç»ï¼Œå¹¶ä¸”é”™è¯¯åŸå› ä¼šè¢«ä¼ é€’åˆ°è°ƒç”¨è¯¥ `async` å‡½æ•°çš„åœ°æ–¹ã€‚è¿™æ„å‘³ç€é”™è¯¯å¯ä»¥åœ¨å¼‚æ­¥è°ƒç”¨é“¾ä¸­å‘ä¸Šå†’æ³¡ï¼Œç›´åˆ°è¢«æŸä¸ª `try...catch` å—æ•è·ï¼Œæˆ–è€…å¦‚æœä¸€ç›´æ²¡æœ‰è¢«æ•è·ï¼Œåˆ™å¯èƒ½å¯¼è‡´æœªå¤„ç†çš„ `Promise` æ‹’ç»ã€‚

### 3.5 å¹¶å‘æ‰§è¡Œä¸æ€§èƒ½è€ƒé‡
åœ¨ TypeScript (JavaScript) ä¸­ï¼Œè™½ç„¶ `async/await` ä½¿å¾—å¼‚æ­¥ä»£ç çš„ç¼–å†™æ›´åŠ ç›´è§‚ï¼Œçœ‹èµ·æ¥åƒæ˜¯åŒæ­¥æ‰§è¡Œï¼Œä½†é»˜è®¤æƒ…å†µä¸‹ï¼Œåœ¨åŒä¸€ä¸ª `async` å‡½æ•°å†…éƒ¨ï¼Œå¤šä¸ª `await` è¯­å¥æ˜¯é¡ºåºæ‰§è¡Œçš„ ã€‚ä¹Ÿå°±æ˜¯è¯´ï¼Œç¬¬ä¸€ä¸ª `await` è¡¨è¾¾å¼ä¼šç­‰å¾…å…¶ `Promise` è§£å†³åï¼Œæ‰ä¼šæ‰§è¡Œåˆ°ç¬¬äºŒä¸ª `await` è¡¨è¾¾å¼ã€‚è¿™ç§é¡ºåºæ‰§è¡Œçš„æ–¹å¼åœ¨æŸäº›åœºæ™¯ä¸‹æ˜¯ç¬¦åˆé€»è¾‘çš„ï¼Œä½†å¦‚æœå¤šä¸ªå¼‚æ­¥æ“ä½œä¹‹é—´æ²¡æœ‰ä¾èµ–å…³ç³»ï¼Œé¡ºåºæ‰§è¡Œä¼šå¯¼è‡´ä¸å¿…è¦çš„å»¶è¿Ÿã€‚ä¸ºäº†å®ç°å¤šä¸ªå¼‚æ­¥æ“ä½œçš„å¹¶å‘æ‰§è¡Œï¼Œå¯ä»¥åˆ©ç”¨ **`Promise.all()` æ–¹æ³•** ã€‚`Promise.all()` æ¥å—ä¸€ä¸ª `Promise` æ•°ç»„ä½œä¸ºå‚æ•°ï¼Œå¹¶è¿”å›ä¸€ä¸ªæ–°çš„ `Promise`ã€‚è¿™ä¸ªæ–°çš„ `Promise` ä¼šåœ¨æ‰€æœ‰è¾“å…¥çš„ `Promise` éƒ½æˆåŠŸè§£å†³åè§£å†³ï¼Œå…¶ç»“æœæ˜¯ä¸€ä¸ªåŒ…å«æ‰€æœ‰è¾“å…¥ `Promise` è§£å†³å€¼çš„æ•°ç»„ã€‚é€šè¿‡ `await Promise.all([asyncCall1(), asyncCall2()])` çš„æ–¹å¼ï¼Œå¯ä»¥ç­‰å¾…æ‰€æœ‰å¹¶å‘ä»»åŠ¡å®Œæˆï¼Œæ€»çš„ç­‰å¾…æ—¶é—´æ¥è¿‘äºè€—æ—¶æœ€é•¿çš„é‚£ä¸ªä»»åŠ¡ï¼Œä»è€Œæ˜¾è‘—æå‡æ€§èƒ½ã€‚ç„¶è€Œï¼Œæ»¥ç”¨æˆ–ä¸å½“ä½¿ç”¨ `async/await` ä¹Ÿå¯èƒ½å¼•å…¥æ€§èƒ½ç“¶é¢ˆ ã€‚ä¾‹å¦‚ï¼Œåœ¨å¾ªç¯ä¸­é”™è¯¯åœ°ä½¿ç”¨ `await` ä¼šå¯¼è‡´æ¯æ¬¡è¿­ä»£éƒ½ç­‰å¾…å‰ä¸€ä¸ªå¼‚æ­¥æ“ä½œå®Œæˆï¼Œä»è€Œå°†å¹¶å‘æ“ä½œé€€åŒ–ä¸ºé¡ºåºæ‰§è¡Œã€‚

## 4. Python Async/Await æœºåˆ¶
Python ä» 3.5 ç‰ˆæœ¬å¼€å§‹å¼•å…¥äº† `async/await` è¯­æ³•ï¼Œç”¨äºç®€åŒ–å¼‚æ­¥ç¼–ç¨‹ï¼Œç‰¹åˆ«æ˜¯åœ¨å¤„ç† I/O å¯†é›†å‹ä»»åŠ¡æ—¶ ã€‚å…¶æ ¸å¿ƒæ˜¯ `asyncio` åº“ï¼Œå®ƒæä¾›äº†äº‹ä»¶å¾ªç¯å’Œåç¨‹ç­‰åŸºç¡€è®¾æ–½ã€‚

### 4.1 å¼‚æ­¥å‡½æ•°çš„å®šä¹‰ä¸è°ƒç”¨ (`async def`, `await`)
åœ¨ Python ä¸­ï¼Œ**å¼‚æ­¥å‡½æ•°é€šè¿‡ `async def` å…³é”®å­—è¿›è¡Œå®šä¹‰**ï¼Œè€Œä¸æ˜¯ä¼ ç»Ÿçš„ `def` ã€‚å½“ä¸€ä¸ªå‡½æ•°è¢«å®šä¹‰ä¸º `async def` æ—¶ï¼Œå®ƒè¢«ç§°ä¸º**åç¨‹ï¼ˆcoroutineï¼‰**ã€‚è°ƒç”¨ä¸€ä¸ª `async def` å‡½æ•°å¹¶ä¸ä¼šç«‹å³æ‰§è¡Œå…¶å‡½æ•°ä½“ï¼Œè€Œæ˜¯è¿”å›ä¸€ä¸ªåç¨‹å¯¹è±¡ ã€‚è¿™ä¸ªåç¨‹å¯¹è±¡éœ€è¦è¢«è°ƒåº¦åˆ°äº‹ä»¶å¾ªç¯ä¸­æ‰èƒ½å®é™…è¿è¡Œã€‚åœ¨å¼‚æ­¥å‡½æ•°å†…éƒ¨ï¼Œå¯ä»¥ä½¿ç”¨ **`await` å…³é”®å­—æ¥ç­‰å¾…å¦ä¸€ä¸ªå¯ç­‰å¾…å¯¹è±¡ï¼ˆawaitableï¼‰çš„å®Œæˆ** ã€‚å¯ç­‰å¾…å¯¹è±¡é€šå¸¸æ˜¯å¦ä¸€ä¸ªåç¨‹ã€ä¸€ä¸ª `asyncio.Task` æˆ–è€…ä¸€ä¸ª `asyncio.Future`ã€‚å½“ `await` è¡¨è¾¾å¼è¢«æ‰§è¡Œæ—¶ï¼Œå½“å‰åç¨‹çš„æ‰§è¡Œä¼šè¢«æŒ‚èµ·ï¼Œäº‹ä»¶å¾ªç¯ä¼šå»æ‰§è¡Œå…¶ä»–ä»»åŠ¡ã€‚è¢« `await` çš„å¯ç­‰å¾…å¯¹è±¡å®Œæˆåï¼Œäº‹ä»¶å¾ªç¯ä¼šåœ¨é€‚å½“çš„æ—¶æœºæ¢å¤å½“å‰åç¨‹çš„æ‰§è¡Œï¼Œå¹¶è¿”å›å…¶ç»“æœã€‚è¦å®é™…è¿è¡Œä¸€ä¸ªåç¨‹ï¼ŒPython æä¾›äº†å‡ ç§æœºåˆ¶ï¼Œæœ€å¸¸ç”¨çš„æ˜¯ **`asyncio.run()` å‡½æ•°**ï¼Œå®ƒç”¨äºè¿è¡Œæœ€é«˜å±‚çº§çš„å…¥å£ç‚¹åç¨‹ï¼Œå¹¶ç®¡ç†äº‹ä»¶å¾ªç¯çš„åˆ›å»ºå’Œå…³é—­ ã€‚

### 4.2 `asyncio` åº“ä¸åç¨‹
Python çš„å¼‚æ­¥ç¼–ç¨‹èƒ½åŠ›ä¸»è¦ç”± **`asyncio` åº“**æä¾›æ”¯æŒï¼Œè¯¥åº“åœ¨ Python 3.4 ç‰ˆæœ¬å¼•å…¥ï¼Œå¹¶åœ¨åç»­ç‰ˆæœ¬ä¸­ä¸æ–­å¾—åˆ°å¢å¼º ã€‚`asyncio` æä¾›äº†ä¸€ä¸ªæ¡†æ¶ï¼Œç”¨äºç¼–å†™å•çº¿ç¨‹å¹¶å‘ä»£ç ï¼Œä¸»è¦åˆ©ç”¨åç¨‹ï¼ˆcoroutinesï¼‰ã€äº‹ä»¶å¾ªç¯ï¼ˆevent loopï¼‰ã€Future å¯¹è±¡ä»¥åŠå„ç§å¼‚æ­¥ I/O åŸè¯­ã€‚åç¨‹æ˜¯ `asyncio` çš„æ ¸å¿ƒæ¦‚å¿µï¼Œé€šè¿‡ `async def` å®šä¹‰çš„å‡½æ•°å°±æ˜¯åç¨‹ã€‚åç¨‹ä¸ç”Ÿæˆå™¨ç±»ä¼¼ï¼Œå¯ä»¥åœ¨æ‰§è¡Œè¿‡ç¨‹ä¸­æš‚åœ (`await`) å’Œæ¢å¤ï¼Œè¿™ä½¿å¾—å®ƒä»¬éå¸¸é€‚åˆå¤„ç† I/O å¯†é›†å‹æ“ä½œ ã€‚äº‹ä»¶å¾ªç¯æ˜¯ `asyncio` åº”ç”¨çš„ä¸­å¤®æ‰§è¡Œå™¨ã€‚å®ƒè´Ÿè´£è°ƒåº¦å’Œæ‰§è¡Œåç¨‹ï¼Œå¤„ç†ç½‘ç»œ I/Oã€è¿è¡Œå­è¿›ç¨‹ä»¥åŠæ“ä½œç³»ç»Ÿä¿¡å·ç­‰äº‹ä»¶ã€‚å¼€å‘è€…é€šå¸¸ä¸ä¼šç›´æ¥ä¸äº‹ä»¶å¾ªç¯çš„åº•å±‚ API äº¤äº’ï¼Œè€Œæ˜¯ä½¿ç”¨åƒ `asyncio.run()` è¿™æ ·çš„é«˜çº§å‡½æ•°æ¥å¯åŠ¨å’Œç®¡ç†äº‹ä»¶å¾ªç¯ ã€‚`asyncio` æä¾›äº†å¤šç§å·¥å…·æ¥ç®¡ç†å¹¶å‘ä»»åŠ¡ï¼Œä¾‹å¦‚ `asyncio.create_task()` å¯ä»¥å°†åç¨‹åŒ…è£…æˆä¸€ä¸ª `Task` å¯¹è±¡ï¼Œ`Task` æ˜¯ `Future` çš„å­ç±»ï¼Œä»£è¡¨ä¸€ä¸ªæ­£åœ¨è¿è¡Œæˆ–è®¡åˆ’è¿è¡Œçš„åç¨‹ã€‚

### 4.3 äº‹ä»¶å¾ªç¯ä¸åä½œå¼å¤šä»»åŠ¡
Python çš„ `async/await` æœºåˆ¶ï¼Œç‰¹åˆ«æ˜¯ä¸ `asyncio` åº“ç»“åˆä½¿ç”¨æ—¶ï¼Œå…¶æ ¸å¿ƒæ˜¯**äº‹ä»¶å¾ªç¯ (Event Loop) å’Œåä½œå¼å¤šä»»åŠ¡ (Cooperative Multitasking)** ã€‚äº‹ä»¶å¾ªç¯æ˜¯ `asyncio` åº”ç”¨çš„æ ¸å¿ƒè°ƒåº¦å™¨ï¼Œå®ƒè´Ÿè´£ç®¡ç†å’Œæ‰§è¡Œåç¨‹ï¼Œå¤„ç† I/O äº‹ä»¶ã€å®šæ—¶å™¨ä»¥åŠå…¶ä»–ç³»ç»Ÿäº‹ä»¶ã€‚å½“ä¸€ä¸ª Python ç¨‹åºå¯åŠ¨ä¸€ä¸ª `asyncio` äº‹ä»¶å¾ªç¯ï¼ˆé€šå¸¸é€šè¿‡ `asyncio.run()`ï¼‰ï¼Œäº‹ä»¶å¾ªç¯ä¼šæŒç»­è¿è¡Œï¼Œç›´åˆ°æ‰€æœ‰é¢„å®šçš„ä»»åŠ¡å®Œæˆæˆ–äº‹ä»¶å¾ªç¯è¢«æ˜¾å¼åœæ­¢ã€‚åœ¨äº‹ä»¶å¾ªç¯çš„æ¯ä¸€è½®è¿­ä»£ä¸­ï¼Œå®ƒä¼šæ£€æŸ¥æ˜¯å¦æœ‰å°±ç»ªçš„åç¨‹å¯ä»¥è¿è¡Œï¼Œç„¶åé€‰æ‹©å…¶ä¸­ä¸€ä¸ªå¹¶æ‰§è¡Œå®ƒã€‚å¦‚æœè¿™ä¸ªåç¨‹æ‰§è¡Œåˆ° `await` è¡¨è¾¾å¼å¹¶éœ€è¦ç­‰å¾…ï¼Œå®ƒä¼šæŒ‚èµ·è‡ªå·±å¹¶å°†æ§åˆ¶æƒè¿”è¿˜ç»™äº‹ä»¶å¾ªç¯ã€‚è¿™ç§ç”±åç¨‹ä¸»åŠ¨è®©å‡ºæ§åˆ¶æƒçš„å¹¶å‘æ–¹å¼ç§°ä¸ºåä½œå¼å¤šä»»åŠ¡ ã€‚ä¸æ“ä½œç³»ç»Ÿå†…æ ¸ç®¡ç†çš„æŠ¢å å¼å¤šä»»åŠ¡ä¸åŒï¼Œåœ¨åä½œå¼å¤šä»»åŠ¡ä¸­ï¼Œä¸€ä¸ªåç¨‹ä¼šä¸€ç›´è¿è¡Œï¼Œç›´åˆ°å®ƒè‡ªæ„¿åœ°é€šè¿‡ `await`ã€`async for` æˆ– `async with` å°†æ§åˆ¶æƒäº¤è¿˜ç»™äº‹ä»¶å¾ªç¯ ã€‚è¿™ç§æ–¹å¼çš„ä¼˜ç‚¹æ˜¯ä¸Šä¸‹æ–‡åˆ‡æ¢çš„å¼€é”€è¾ƒå°ï¼Œä½†éœ€è¦å¼€å‘è€…ç¡®ä¿åç¨‹é€‚æ—¶è®©å‡ºæ§åˆ¶æƒï¼Œä»¥é¿å…â€œé¥¿æ­»â€å…¶ä»–åç¨‹ã€‚

### 4.4 é”™è¯¯å¤„ç†æœºåˆ¶
åœ¨ Python çš„ `asyncio` å¼‚æ­¥ç¼–ç¨‹æ¨¡å‹ä¸­ï¼Œé”™è¯¯å¤„ç†ä¸»è¦ä¾èµ–äºæ ‡å‡†çš„ **`try...except` è¯­å¥å—**ï¼Œè¿™ä¸åŒæ­¥ä»£ç ä¸­çš„é”™è¯¯å¤„ç†æ–¹å¼éå¸¸ç›¸ä¼¼ ã€‚å½“ä¸€ä¸ªåç¨‹ä¸­å‘ç”Ÿå¼‚å¸¸æ—¶ï¼Œå¦‚æœè¯¥å¼‚å¸¸æ²¡æœ‰è¢«åç¨‹å†…éƒ¨çš„ `try...except` å—æ•è·ï¼Œå®ƒå°†ä¼šä¼ æ’­åˆ°è°ƒç”¨è¯¥åç¨‹çš„åœ°æ–¹ï¼Œæˆ–è€…å¦‚æœè¯¥åç¨‹æ˜¯ä¸€ä¸ª `Task`ï¼Œå¼‚å¸¸ä¼šè¢«æ•è·å¹¶å­˜å‚¨åœ¨ `Task` å¯¹è±¡ä¸­ã€‚å¦‚æœå¼‚å¸¸ä¸€ç›´æœªè¢«å¤„ç†ï¼Œæœ€ç»ˆå¯èƒ½ä¼šå¯¼è‡´äº‹ä»¶å¾ªç¯åœæ­¢å¹¶æŠ¥å‘Šæœªå¤„ç†çš„å¼‚å¸¸ã€‚å› æ­¤ï¼Œåœ¨ç¼–å†™å¼‚æ­¥ä»£ç æ—¶ï¼Œä¸åŒæ­¥ä»£ç ä¸€æ ·ï¼Œéœ€è¦ä»”ç»†è€ƒè™‘å¯èƒ½å‘ç”Ÿçš„å¼‚å¸¸ï¼Œå¹¶ä½¿ç”¨ `try...except` è¿›è¡Œé€‚å½“çš„é”™è¯¯å¤„ç† ã€‚ä¾‹å¦‚ï¼Œå¦‚æœä¸€ä¸ªå¼‚æ­¥æ“ä½œå¯èƒ½å¤±è´¥å¹¶æŠ›å‡ºå¼‚å¸¸ï¼Œå¼€å‘è€…åº”è¯¥å°† `await` è¯¥æ“ä½œçš„è¯­å¥åŒ…è£¹åœ¨ `try` å—ä¸­ï¼Œå¹¶åœ¨ç›¸åº”çš„ `except` å—ä¸­å¤„ç†ç‰¹å®šçš„å¼‚å¸¸ç±»å‹ ã€‚`asyncio` æœ¬èº«ä¹Ÿå®šä¹‰äº†ä¸€äº›ç‰¹å®šçš„å¼‚å¸¸ç±»å‹ï¼Œä¾‹å¦‚ `asyncio.CancelledError`ï¼Œå½“å–æ¶ˆä¸€ä¸ªæ­£åœ¨è¿è¡Œçš„ `Task` æ—¶ä¼šå¼•å‘æ­¤å¼‚å¸¸ï¼Œæ­£ç¡®å¤„ç†å®ƒå¯¹äºå®ç°ä¼˜é›…çš„ä»»åŠ¡å–æ¶ˆå’Œèµ„æºæ¸…ç†éå¸¸é‡è¦ ã€‚

### 4.5 å¹¶å‘æ‰§è¡Œä¸æ€§èƒ½åˆ†æ
Python çš„ `asyncio` åº“é€šè¿‡äº‹ä»¶å¾ªç¯å’Œåç¨‹å®ç°äº†å•çº¿ç¨‹å†…çš„å¹¶å‘æ‰§è¡Œï¼Œè¿™å¯¹äº **I/O å¯†é›†å‹åº”ç”¨**ï¼ˆå¦‚ç½‘ç»œæœåŠ¡å™¨ã€Web çˆ¬è™«ã€å¾®æœåŠ¡ç­‰ï¼‰çš„æ€§èƒ½æå‡å°¤ä¸ºæ˜¾è‘— ã€‚å½“ä¸€ä¸ªåç¨‹æ‰§è¡Œåˆ° `await` è¡¨è¾¾å¼ç­‰å¾… I/O æ“ä½œå®Œæˆæ—¶ï¼Œå®ƒä¼šæŒ‚èµ·å¹¶é‡Šæ”¾æ§åˆ¶æƒç»™äº‹ä»¶å¾ªç¯ï¼Œäº‹ä»¶å¾ªç¯éšåå¯ä»¥è°ƒåº¦å’Œæ‰§è¡Œå…¶ä»–å°±ç»ªçš„åç¨‹ã€‚è¿™ç§åä½œå¼å¤šä»»åŠ¡å¤„ç†æ–¹å¼é¿å…äº†å¤šçº¿ç¨‹ç¼–ç¨‹ä¸­å¸¸è§çš„é”ç«äº‰å’Œä¸Šä¸‹æ–‡åˆ‡æ¢å¼€é”€ã€‚è¦å®ç°å¤šä¸ªå¼‚æ­¥ä»»åŠ¡çš„å¹¶å‘æ‰§è¡Œï¼Œå¯ä»¥å°†å®ƒä»¬åŒ…è£…æˆ `asyncio.Task` å¯¹è±¡ï¼Œæˆ–è€…ä½¿ç”¨ **`asyncio.gather()`ã€`asyncio.wait()`** ç­‰å‡½æ•° ã€‚ç„¶è€Œï¼Œå…³äºå¼‚æ­¥ Python çš„æ€§èƒ½ï¼Œå­˜åœ¨ä¸€äº›éœ€è¦æ³¨æ„çš„æ–¹é¢ã€‚æœ‰åˆ†ææŒ‡å‡ºï¼Œå¼‚æ­¥ Python æ¡†æ¶çš„ååé‡å¯èƒ½å¹¶ä¸æ€»æ˜¯ä¼˜äºç»è¿‡ä¼˜åŒ–çš„åŒæ­¥æ¡†æ¶ï¼Œä¸”åœ¨é«˜è´Ÿè½½ä¸‹ï¼Œå¼‚æ­¥ Python çš„å»¶è¿Ÿæ³¢åŠ¨å¯èƒ½æ›´å¤§ï¼Œå› ä¸ºåä½œå¼å¤šä»»åŠ¡å¯èƒ½å¯¼è‡´æ‰§è¡Œæ—¶é—´åˆ†é…ä¸å…¬å¹³ ã€‚å› æ­¤ï¼Œè™½ç„¶ `async/await` ä¸º I/O å¯†é›†å‹åº”ç”¨å¸¦æ¥äº†æ˜¾è‘—çš„å¹¶å‘èƒ½åŠ›ï¼Œä½†åœ¨ CPU å¯†é›†å‹ä»»åŠ¡æˆ–éœ€è¦ä¸¥æ ¼æ§åˆ¶å»¶è¿Ÿçš„åœºæ™¯ä¸‹ï¼Œå¼€å‘è€…éœ€è¦ä»”ç»†è¯„ä¼°å’Œæµ‹è¯•å…¶æ€§èƒ½è¡¨ç°ï¼Œå¹¶æ³¨æ„é¿å…å¸¸è§çš„æ€§èƒ½ç“¶é¢ˆï¼Œå¦‚é˜»å¡æ“ä½œå’Œèµ„æºé¥¥é¥¿ ã€‚

## 5. æ¨ªå‘å¯¹æ¯”ï¼šSwift, TypeScript, Python
ä¸ºäº†æ›´æ¸…æ™°åœ°æ¯”è¾ƒ Swift 5ã€TypeScript (JavaScript) å’Œ Python åœ¨ `async/await` æœºåˆ¶ä¸Šçš„å¼‚åŒï¼Œä¸‹è¡¨æ€»ç»“äº†å®ƒä»¬åœ¨å…³é”®ç‰¹æ€§ä¸Šçš„å¯¹æ¯”ï¼š

| ç‰¹æ€§             | Swift 5                                                                 | TypeScript (JavaScript)                                                              | Python (asyncio)                                                                     |
| ---------------- | ----------------------------------------------------------------------- | ------------------------------------------------------------------------------------ | [48;25;80;950;1600t------------------------------------------------------------------------------------ |
| **å¼‚æ­¥å‡½æ•°å®šä¹‰**   | `func foo() async { ... }` æˆ– `func foo() async throws { ... }`      | `async function foo() { ... }`                                                   | `async def foo(): ...`                                                           |
| **å¼‚æ­¥è°ƒç”¨**     | `await foo()`                                                       | `await foo()`                                                                    | `await foo()`                                                                    |
| **åº•å±‚æœºåˆ¶**     | ç»“æ„åŒ–å¹¶å‘ (`Task`), çŠ¶æ€æœº, ç»­ä½“ (continuation)              | åŸºäº `Promise`, äº‹ä»¶å¾ªç¯ (Event Loop)                                        | åç¨‹ (Coroutines), äº‹ä»¶å¾ªç¯ (Event Loop), `asyncio` åº“                       |
| **å¹¶å‘æ¨¡å‹**     | ç»“æ„åŒ–å¹¶å‘ (`TaskGroup`, `async let`), `Actor` æ¨¡å‹          | å•çº¿ç¨‹äº‹ä»¶å¾ªç¯é©±åŠ¨, åŸºäº `Promise.all()` ç­‰å®ç°å¹¶å‘                               | åä½œå¼å¤šä»»åŠ¡ (Cooperative Multitasking), å•çº¿ç¨‹äº‹ä»¶å¾ªç¯é©±åŠ¨                 |
| **å¹¶å‘æ‰§è¡Œä½ç½®** | Swift è¿è¡Œæ—¶ç®¡ç†çš„åä½œçº¿ç¨‹æ±  (é€šå¸¸ä¸ CPU æ ¸å¿ƒæ•°ç›¸å…³)                 | ä¸»çº¿ç¨‹ (UI çº¿ç¨‹) æˆ– Worker çº¿ç¨‹ (Node.js æˆ– Web Workers), ç”±äº‹ä»¶å¾ªç¯è°ƒåº¦                 | ä¸»çº¿ç¨‹ (é€šå¸¸), ç”± `asyncio` äº‹ä»¶å¾ªç¯è°ƒåº¦                                               |
| **é˜»å¡è¡Œä¸º**     | **éé˜»å¡**ã€‚`await` å¯¼è‡´ä»»åŠ¡æŒ‚èµ·ï¼Œé‡Šæ”¾çº¿ç¨‹ï¼Œä¸é˜»å¡çº¿ç¨‹ ã€‚        | **éé˜»å¡**ã€‚`await` æš‚åœ `async` å‡½æ•°æ‰§è¡Œï¼Œå°†æ§åˆ¶æƒäº¤è¿˜äº‹ä»¶å¾ªç¯ï¼Œä¸é˜»å¡ä¸»çº¿ç¨‹ ã€‚ | **éé˜»å¡**ã€‚`await` æŒ‚èµ·åç¨‹ï¼Œå°†æ§åˆ¶æƒäº¤è¿˜äº‹ä»¶å¾ªç¯ï¼Œä¸é˜»å¡çº¿ç¨‹ ã€‚                   |
| **é”™è¯¯å¤„ç†**     | `do { try await ... } catch { ... }` (ä¸åŒæ­¥é”™è¯¯å¤„ç†ä¸€è‡´)      | `try { await ... } catch (error) { ... }` (ä¸åŒæ­¥é”™è¯¯å¤„ç†ä¸€è‡´)              | `try: await ... except ErrorType: ...` (ä¸åŒæ­¥é”™è¯¯å¤„ç†ä¸€è‡´)                 |
| **æ€§èƒ½ç‰¹ç‚¹**     | é«˜æ•ˆçº¿ç¨‹åˆ©ç”¨ï¼Œé¿å…å›è°ƒåœ°ç‹±ã€‚è½»å¾®æŒ‚èµ·/æ¢å¤å¼€é”€ï¼Œç¼–è¯‘æ—¶çŠ¶æ€æœºè½¬æ¢ ã€‚ | å•çº¿ç¨‹é«˜æ•ˆå¤„ç† I/Oï¼Œé¿å…é˜»å¡ã€‚ä¾èµ–äº‹ä»¶å¾ªç¯è°ƒåº¦ã€‚                                       | é«˜æ•ˆå¤„ç† I/O å¯†é›†å‹ä»»åŠ¡ï¼Œå‡å°‘çº¿ç¨‹å¼€é”€ã€‚åä½œå¼è°ƒåº¦å¯èƒ½å¯¼è‡´å»¶è¿Ÿæ³¢åŠ¨ ã€‚          |
| **ä¸»è¦é€‚ç”¨åœºæ™¯** | iOS/macOS ç­‰ Apple å¹³å°åº”ç”¨å¼€å‘ï¼ŒæœåŠ¡å™¨ç«¯ Swift (Vapor ç­‰)                 | Web å‰ç«¯ (æµè§ˆå™¨), Node.js åç«¯æœåŠ¡ï¼ŒI/O å¯†é›†å‹åº”ç”¨                                   | I/O å¯†é›†å‹ç½‘ç»œåº”ç”¨ (æœåŠ¡å™¨ã€çˆ¬è™«ã€API å®¢æˆ·ç«¯), å¾®æœåŠ¡                                   |

*Table 1: Swift 5, TypeScript, å’Œ Python Async/Await æœºåˆ¶å¯¹æ¯”*

### 5.1 å¼‚æ­¥ç¼–ç¨‹æ¨¡å‹å¯¹æ¯”
**Swift 5 é‡‡ç”¨äº†ç»“æ„åŒ–å¹¶å‘æ¨¡å‹**ï¼Œå…¶æ ¸å¿ƒæ˜¯ `Task` ç±»å‹ï¼Œå®ƒä»£è¡¨ä¸€ä¸ªå¼‚æ­¥å·¥ä½œçš„å•å…ƒï¼Œå¹¶ä¸”ä»»åŠ¡çš„ç”Ÿå‘½å‘¨æœŸä¸å…¶åˆ›å»ºçš„ä½œç”¨åŸŸç´§å¯†ç›¸å…³ ã€‚Swift è¿˜å¼•å…¥äº† `Actor` æ¨¡å‹æ¥å¤„ç†å…±äº«å¯å˜çŠ¶æ€ï¼Œç¡®ä¿çº¿ç¨‹å®‰å…¨ã€‚**TypeScript (JavaScript) çš„å¼‚æ­¥æ¨¡å‹æ˜¯åŸºäºäº‹ä»¶å¾ªç¯å’Œ `Promise` çš„**ï¼Œå®ƒæ˜¯å•çº¿ç¨‹çš„ï¼Œé€šè¿‡äº‹ä»¶å¾ªç¯æ¥å¤„ç†å¼‚æ­¥ä»»åŠ¡çš„è°ƒåº¦å’Œæ‰§è¡Œï¼Œ`async/await` æ˜¯å…¶è¯­æ³•ç³– ã€‚**Python çš„å¼‚æ­¥æ¨¡å‹åˆ™ä¾èµ–äº `asyncio` åº“å’Œåç¨‹**ï¼ŒåŒæ ·é‡‡ç”¨äº‹ä»¶å¾ªç¯æœºåˆ¶ï¼Œä½†å¼ºè°ƒåä½œå¼å¤šä»»åŠ¡ï¼Œå³åç¨‹å¿…é¡»ä¸»åŠ¨é€šè¿‡ `await` è®©å‡ºæ§åˆ¶æƒ ã€‚è¿™ä¸‰ç§æ¨¡å‹éƒ½æ—¨åœ¨ç®€åŒ–å¼‚æ­¥ç¼–ç¨‹ï¼Œä½† Swift çš„ç»“æ„åŒ–å¹¶å‘å’Œ `Actor` æ¨¡å‹åœ¨è¯­è¨€å±‚é¢æä¾›äº†æ›´å¼ºçš„å¹¶å‘å®‰å…¨ä¿è¯ï¼Œè€Œ TypeScript å’Œ Python æ›´å¤šåœ°ä¾èµ–äºäº‹ä»¶å¾ªç¯å’Œå¼€å‘è€…éµå¾ªåä½œåŸåˆ™ã€‚

### 5.2 å¹¶å‘æ‰§è¡Œä½ç½®ä¸æœºåˆ¶å·®å¼‚
**Swift çš„å¹¶å‘ä»»åŠ¡åœ¨ç”±è¿è¡Œæ—¶ç®¡ç†çš„åä½œçº¿ç¨‹æ± ä¸­æ‰§è¡Œ**ï¼Œçº¿ç¨‹æ•°é‡é€šå¸¸ä¸ CPU æ ¸å¿ƒæ•°ç›¸å…³ï¼Œ`await` æŒ‚èµ·ä»»åŠ¡ä½†ä¸é˜»å¡åº•å±‚çº¿ç¨‹ ã€‚å¹¶å‘æ‰§è¡Œå¯ä»¥é€šè¿‡ `async let` å’Œ `TaskGroup` æ˜¾å¼å¯åŠ¨ã€‚**TypeScript (JavaScript) ä¸»è¦åœ¨å•ä¸€çº¿ç¨‹ï¼ˆé€šå¸¸æ˜¯ä¸»çº¿ç¨‹æˆ– Node.js çš„äº‹ä»¶å¾ªç¯çº¿ç¨‹ï¼‰ä¸Šæ‰§è¡Œï¼Œé€šè¿‡äº‹ä»¶å¾ªç¯å®ç°éé˜»å¡å¹¶å‘**ï¼›`await` æš‚åœ `async` å‡½æ•°ï¼Œä½†ä¸é˜»å¡äº‹ä»¶å¾ªç¯ ã€‚å¹¶å‘æ‰§è¡Œå¤šä¸ªå¼‚æ­¥æ“ä½œé€šå¸¸ä¾èµ– `Promise.all()`ã€‚**Python çš„åç¨‹åœ¨ `asyncio` äº‹ä»¶å¾ªç¯ç®¡ç†çš„å•ä¸€çº¿ç¨‹ï¼ˆé€šå¸¸æ˜¯ä¸»çº¿ç¨‹ï¼‰ä¸Šæ‰§è¡Œ**ï¼Œé€šè¿‡åä½œå¼å¤šä»»åŠ¡å®ç°å¹¶å‘ï¼›`await` æŒ‚èµ·åç¨‹ï¼Œå…è®¸äº‹ä»¶å¾ªç¯è¿è¡Œå…¶ä»–åç¨‹ ã€‚å¹¶å‘æ‰§è¡Œé€šè¿‡ `asyncio.gather()` æˆ–åˆ›å»ºå¤šä¸ª `Task` å®ç°ã€‚Swift çš„çº¿ç¨‹æ± æ¨¡å‹å…è®¸çœŸæ­£çš„å¹¶è¡Œæ‰§è¡Œï¼ˆåœ¨å¤šæ ¸ CPU ä¸Šï¼‰ï¼Œè€Œ TypeScript å’Œ Python çš„äº‹ä»¶å¾ªç¯æ¨¡å‹åœ¨å•ä¸€çº¿ç¨‹ä¸Šé€šè¿‡ä»»åŠ¡åˆ‡æ¢å®ç°å¹¶å‘ï¼Œå°½ç®¡ Python çš„ `asyncio` ä¹Ÿå¯ä»¥é…ç½®ä¸ºä½¿ç”¨çº¿ç¨‹æ± æ‰§è¡Œå™¨æ¥å¤„ç†æŸäº›é˜»å¡æ“ä½œã€‚

### 5.3 é”™è¯¯å¤„ç†æ–¹å¼çš„å¼‚åŒ
**ä¸‰è€…åœ¨é”™è¯¯å¤„ç†ä¸Šéƒ½é‡‡ç”¨äº†ä¸åŒæ­¥ä»£ç ç›¸ä¼¼çš„ `try-catch` (æˆ– `try-except`) ç»“æ„**ï¼Œè¿™ä½¿å¾—å¼‚æ­¥ä»£ç çš„é”™è¯¯å¤„ç†æ›´åŠ ç›´è§‚å’Œç»Ÿä¸€ã€‚Swift ä½¿ç”¨ `do-catch` å—é…åˆ `try await` æ¥æ•è·å’Œå¤„ç†å¼‚æ­¥å‡½æ•°æŠ›å‡ºçš„é”™è¯¯ ã€‚TypeScript (JavaScript) åŒæ ·ä½¿ç”¨ `try-catch` å—æ¥æ•è· `await` è¡¨è¾¾å¼å¯èƒ½æŠ›å‡ºçš„é”™è¯¯ï¼Œè¿™äº›é”™è¯¯é€šå¸¸æºäºè¢«æ‹’ç»çš„ `Promise` ã€‚Python ä¹Ÿä½¿ç”¨ `try-except` å—æ¥æ•è· `await` è¡¨è¾¾å¼ä¸­åç¨‹æˆ–å¼‚æ­¥æ“ä½œå¼•å‘çš„å¼‚å¸¸ ã€‚è¿™ç§ä¸€è‡´æ€§é™ä½äº†å­¦ä¹ æˆæœ¬ï¼Œå¹¶ä½¿å¾—å¼‚æ­¥ä»£ç çš„é”™è¯¯å¤„ç†é€»è¾‘æ›´åŠ æ¸…æ™°ã€‚ä¸åŒä¹‹å¤„å¯èƒ½åœ¨äºç‰¹å®šè¯­è¨€æˆ–åº“æä¾›çš„é¢å¤–é”™è¯¯å¤„ç†å·¥å…·æˆ–æ¨¡å¼ï¼Œä¾‹å¦‚ Swift çš„ `Result` ç±»å‹ï¼ˆè™½ç„¶ `async/await` æ›´æ¨èç›´æ¥ä½¿ç”¨ `throws`ï¼‰æˆ– Python `asyncio` ä¸­ `Task` å¯¹è±¡å¯¹å¼‚å¸¸çš„å°è£…å’Œå¤„ç†æ–¹å¼ã€‚

### 5.4 æ€§èƒ½ä¸é˜»å¡è¡Œä¸ºå¯¹æ¯”
**ä¸‰è€…éƒ½å¼ºè°ƒéé˜»å¡è¡Œä¸º**ã€‚Swift çš„ `await` å¯¼è‡´ä»»åŠ¡æŒ‚èµ·ï¼Œé‡Šæ”¾çº¿ç¨‹ç»™å…¶ä»–ä»»åŠ¡ä½¿ç”¨ï¼Œä¸é˜»å¡çº¿ç¨‹ ã€‚TypeScript (JavaScript) çš„ `await` æš‚åœ `async` å‡½æ•°æ‰§è¡Œï¼Œå°†æ§åˆ¶æƒäº¤è¿˜äº‹ä»¶å¾ªç¯ï¼Œä¸é˜»å¡ä¸»çº¿ç¨‹ï¼Œä¿è¯äº†åº”ç”¨çš„å“åº”æ€§ ã€‚Python çš„ `await` æŒ‚èµ·åç¨‹ï¼Œå°†æ§åˆ¶æƒäº¤è¿˜äº‹ä»¶å¾ªç¯ï¼ŒåŒæ ·ä¸é˜»å¡çº¿ç¨‹ï¼Œä½¿å¾—äº‹ä»¶å¾ªç¯å¯ä»¥å¤„ç†å…¶ä»–ä»»åŠ¡ ã€‚åœ¨æ€§èƒ½æ–¹é¢ï¼Œ**Swift é€šè¿‡ç»“æ„åŒ–å¹¶å‘å’Œä¼˜åŒ–çš„è¿è¡Œæ—¶ï¼ˆå¦‚çŠ¶æ€æœºè½¬æ¢å’Œç»­ä½“ï¼‰æ—¨åœ¨æä¾›é«˜æ•ˆçš„å¹¶å‘æ‰§è¡Œ**ï¼Œç‰¹åˆ«é€‚åˆåˆ©ç”¨å¤šæ ¸å¤„ç†å™¨ï¼Œä½†ä¹Ÿéœ€è¦æ³¨æ„æŒ‚èµ·å’Œæ¢å¤çš„å¼€é”€ä»¥åŠé¿å…åœ¨å¼‚æ­¥ä¸Šä¸‹æ–‡ä¸­æ‰§è¡Œé•¿æ—¶é—´é˜»å¡æ“ä½œ ã€‚**TypeScript (JavaScript) åœ¨å•çº¿ç¨‹äº‹ä»¶å¾ªç¯æ¨¡å‹ä¸‹ï¼Œé€šè¿‡éé˜»å¡ I/O é«˜æ•ˆå¤„ç†å¤§é‡å¹¶å‘è¿æ¥**ï¼Œä½† CPU å¯†é›†å‹ä»»åŠ¡ä¼šé˜»å¡äº‹ä»¶å¾ªç¯ã€‚**Python çš„ `asyncio` åœ¨ I/O å¯†é›†å‹åœºæ™¯ä¸‹æ€§èƒ½ä¼˜è¶Š**ï¼Œèƒ½æœ‰æ•ˆç®¡ç†å¤§é‡å¹¶å‘ I/O æ“ä½œï¼Œä½†åä½œå¼å¤šä»»åŠ¡ç‰¹æ€§è¦æ±‚å¼€å‘è€…æ³¨æ„é¿å…é•¿æ—¶é—´è¿è¡Œè€Œä¸è®©å‡ºæ§åˆ¶æƒçš„åç¨‹ï¼Œå¦åˆ™å¯èƒ½å¯¼è‡´æ€§èƒ½é—®é¢˜æˆ–å»¶è¿Ÿæ³¢åŠ¨ ã€‚å¯¹äº CPU å¯†é›†å‹ä»»åŠ¡ï¼ŒPython é€šå¸¸å»ºè®®ä½¿ç”¨å¤šè¿›ç¨‹ã€‚

### 5.5 é€‚ç”¨åœºæ™¯ä¸ç”Ÿæ€ç³»ç»Ÿ
**Swift çš„ `async/await` ä¸»è¦åº”ç”¨äº Apple ç”Ÿæ€ç³»ç»Ÿå†…çš„ iOSã€macOS ç­‰å¹³å°çš„åº”ç”¨å¼€å‘**ï¼Œä»¥åŠæ—¥ç›Šå¢é•¿çš„æœåŠ¡å™¨ç«¯ Swift å¼€å‘ï¼ˆå¦‚ Vapor æ¡†æ¶ï¼‰ã€‚å…¶å¼ºç±»å‹ç³»ç»Ÿå’Œç»“æ„åŒ–å¹¶å‘æ¨¡å‹æœ‰åŠ©äºæ„å»ºå®‰å…¨ã€é«˜æ•ˆçš„å¹¶å‘åº”ç”¨ã€‚**TypeScript (JavaScript) çš„ `async/await` å¹¿æ³›åº”ç”¨äº Web å‰ç«¯å¼€å‘å’Œ Node.js åç«¯å¼€å‘**ï¼Œå¤„ç†æµè§ˆå™¨ä¸­çš„å¼‚æ­¥ UI æ›´æ–°ã€ç½‘ç»œè¯·æ±‚ä»¥åŠæœåŠ¡å™¨ç«¯çš„é«˜å¹¶å‘ I/O æ“ä½œã€‚å…¶åºå¤§çš„ npm ç”Ÿæ€ç³»ç»Ÿæä¾›äº†ä¸°å¯Œçš„å¼‚æ­¥åº“ã€‚**Python çš„ `async/await` ç»“åˆ `asyncio` åº“ï¼Œéå¸¸é€‚åˆæ„å»º I/O å¯†é›†å‹çš„ç½‘ç»œåº”ç”¨**ï¼Œå¦‚ Web æœåŠ¡å™¨ï¼ˆFastAPI, Sanicï¼‰ã€ç½‘ç»œçˆ¬è™«ã€API å®¢æˆ·ç«¯ä»¥åŠå¾®æœåŠ¡ã€‚Python çš„å¼‚æ­¥ç”Ÿæ€ç³»ç»Ÿä¹Ÿåœ¨ä¸æ–­å‘å±•ï¼Œæ‹¥æœ‰å¦‚ `aiohttp`ã€`aiomysql` ç­‰ä¼˜ç§€çš„å¼‚æ­¥åº“ã€‚é€‰æ‹©å“ªç§è¯­è¨€å’Œæœºåˆ¶å–å†³äºå…·ä½“çš„é¡¹ç›®éœ€æ±‚ã€ç›®æ ‡å¹³å°ã€å›¢é˜Ÿç†Ÿæ‚‰åº¦ä»¥åŠç”Ÿæ€ç³»ç»Ÿæ”¯æŒã€‚

## 6. Demo Code ç¤ºä¾‹
ä»¥ä¸‹å°†åˆ†åˆ«å±•ç¤º Swift 5, TypeScript, å’Œ Python åœ¨ `async/await` ä½¿ç”¨ä¸Šçš„åŸºæœ¬ç¤ºä¾‹ï¼Œæ¶µç›–å¼‚æ­¥å‡½æ•°å®šä¹‰ä¸è°ƒç”¨ã€å¹¶å‘æ‰§è¡Œå¤šä¸ªå¼‚æ­¥ä»»åŠ¡ä»¥åŠé”™è¯¯å¤„ç†ã€‚

### 6.1 Swift 5 ç¤ºä¾‹
#### 6.1.1 åŸºæœ¬å¼‚æ­¥å‡½æ•°å®šä¹‰ä¸è°ƒç”¨
```swift
// å®šä¹‰ä¸€ä¸ªå¼‚æ­¥å‡½æ•°ï¼Œæ¨¡æ‹Ÿç½‘ç»œè¯·æ±‚
func fetchUserData(from urlString: String) async throws -> String {
    guard let url = URL(string: urlString) else {
        throw URLError(.badURL)
    }
    
    // ä½¿ç”¨ URLSession çš„å¼‚æ­¥ data(from:) æ–¹æ³•
    let (data, _) = try await URLSession.shared.data(from: url)
    
    if let result = String(data: data, encoding: .utf8) {
        return result
    } else {
        throw URLError(.cannotDecodeContentData)
    }
}

// è°ƒç”¨å¼‚æ­¥å‡½æ•°
Task {
    do {
        let userData = try await fetchUserData(from: "https://api.example.com/user/1")
        print("Fetched user data: \(userData)")
    } catch {
        print("Failed to fetch user data: \(error)")
    }
}
```
*è¿™æ®µ Swift ä»£ç å®šä¹‰äº†ä¸€ä¸ª `fetchUserData` å¼‚æ­¥å‡½æ•°ï¼Œå®ƒæ¥å—ä¸€ä¸ª URL å­—ç¬¦ä¸²ï¼Œå°è¯•ä»ä¸­è·å–æ•°æ®å¹¶è½¬æ¢ä¸ºå­—ç¬¦ä¸²ã€‚å¦‚æœ URL æ— æ•ˆæˆ–æ•°æ®æ— æ³•è§£ç ï¼Œå®ƒä¼šæŠ›å‡ºé”™è¯¯ã€‚åœ¨ `Task` å—ä¸­ï¼Œæˆ‘ä»¬ä½¿ç”¨ `try await` è°ƒç”¨è¿™ä¸ªå¼‚æ­¥å‡½æ•°ï¼Œå¹¶é€šè¿‡ `do-catch` å¤„ç†å¯èƒ½çš„é”™è¯¯ã€‚*

#### 6.1.2 å¹¶å‘æ‰§è¡Œå¤šä¸ªå¼‚æ­¥ä»»åŠ¡ (`async let`, `TaskGroup`)
```swift
// ä½¿ç”¨ async let å¹¶å‘æ‰§è¡Œ
func fetchMultipleDataConcurrently() async {
    async let data1 = fetchUserData(from: "https://api.example.com/data1")
    async let data2 = fetchUserData(from: "https://api.example.com/data2")
    
    do {
        let (result1, result2) = try await (data1, data2)
        print("Data 1: \(result1)")
        print("Data 2: \(result2)")
    } catch {
        print("Error fetching data concurrently: \(error)")
    }
}

// ä½¿ç”¨ TaskGroup å¹¶å‘æ‰§è¡Œ
func fetchMultipleDataWithTaskGroup(urls: [String]) async throws -> [String] {
    var results: [String] = []
    
    try await withThrowingTaskGroup(of: String.self) { group in
        for url in urls {
            group.addTask {
                try await fetchUserData(from: url)
            }
        }
        
        for try await result in group {
            results.append(result)
        }
    }
    
    return results
}

// è°ƒç”¨å¹¶å‘å‡½æ•°
Task {
    await fetchMultipleDataConcurrently()
    
    do {
        let urls = ["https://api.example.com/item/1", "https://api.example.com/item/2"]
        let items = try await fetchMultipleDataWithTaskGroup(urls: urls)
        print("Fetched items: \(items)")
    } catch {
        print("Error fetching items with TaskGroup: \(error)")
    }
}
```
*è¿™æ®µä»£ç å±•ç¤ºäº†ä¸¤ç§åœ¨ Swift ä¸­å¹¶å‘æ‰§è¡Œå¤šä¸ªå¼‚æ­¥ä»»åŠ¡çš„æ–¹æ³•ã€‚`fetchMultipleDataConcurrently` ä½¿ç”¨ `async let` æ¥åŒæ—¶å¯åŠ¨ä¸¤ä¸ª `fetchUserData` è°ƒç”¨ï¼Œç„¶åä½¿ç”¨ `try await` ç­‰å¾…å®ƒä»¬éƒ½å®Œæˆã€‚`fetchMultipleDataWithTaskGroup` ä½¿ç”¨ `withThrowingTaskGroup` æ¥åŠ¨æ€åœ°ä¸ºä¸€ç»„ URL åˆ›å»ºå¹¶å‘ä»»åŠ¡ï¼Œå¹¶æ”¶é›†å®ƒä»¬çš„ç»“æœã€‚*

#### 6.1.3 å¼‚æ­¥æ“ä½œä¸­çš„é”™è¯¯å¤„ç†
```swift
// é”™è¯¯å¤„ç†å·²åœ¨ä¸Šè¿°ç¤ºä¾‹ä¸­å±•ç¤ºï¼Œè¿™é‡Œå†å¼ºè°ƒä¸€ä¸‹ do-catch çš„ä½¿ç”¨
func processUserData() async {
    let urlString = "https://api.example.com/invalid-url" // å‡è®¾è¿™æ˜¯ä¸€ä¸ªæ— æ•ˆçš„ URL
    
    do {
        let data = try await fetchUserData(from: urlString)
        print("Processed data: \(data)")
    } catch URLError.badURL {
        print("The provided URL is invalid.")
    } catch URLError.cannotDecodeContentData {
        print("Failed to decode the received data.")
    } catch {
        print("An unexpected error occurred: \(error)")
    }
}

Task {
    await processUserData()
}
```
*æ­¤ç¤ºä¾‹è¿›ä¸€æ­¥ç»†åŒ–äº†é”™è¯¯å¤„ç†ã€‚`processUserData` å‡½æ•°å°è¯•è°ƒç”¨ `fetchUserData`ã€‚å¦‚æœå‘ç”Ÿ `URLError.badURL` æˆ– `URLError.cannotDecodeContentData` é”™è¯¯ï¼Œä¼šæ‰§è¡Œç‰¹å®šçš„ `catch` å—ã€‚å…¶ä»–æœªçŸ¥é”™è¯¯ä¼šè¢«æœ€åä¸€ä¸ªé€šç”¨çš„ `catch` å—æ•è·ã€‚è¿™å±•ç¤ºäº† Swift ä¸­é’ˆå¯¹ä¸åŒé”™è¯¯ç±»å‹è¿›è¡Œç²¾ç»†åŒ–å¤„ç†çš„èƒ½åŠ›ã€‚*

### 6.2 TypeScript ç¤ºä¾‹
#### 6.2.1 åŸºæœ¬å¼‚æ­¥å‡½æ•°å®šä¹‰ä¸è°ƒç”¨
```typescript
// å®šä¹‰ä¸€ä¸ªå¼‚æ­¥å‡½æ•°ï¼Œæ¨¡æ‹Ÿç½‘ç»œè¯·æ±‚
async function fetchUserData(userId: number): Promise<string> {
    // å‡è®¾ fetchDataFromServer æ˜¯ä¸€ä¸ªè¿”å› Promise<string> çš„æ¨¡æ‹Ÿå‡½æ•°
    const response = await fetchDataFromServer(`/users/${userId}`);
    if (!response.ok) {
        throw new Error(`Failed to fetch user data for ID ${userId}`);
    }
    return response.data;
}

// æ¨¡æ‹Ÿçš„ fetchDataFromServer å‡½æ•°
function fetchDataFromServer(url: string): Promise<{ ok: boolean; data: string }> {
    return new Promise((resolve, reject) => {
        setTimeout(() => {
            if (url === '/users/1') {
                resolve({ ok: true, data: `Data for user 1` });
            } else {
                resolve({ ok: false, data: '' }); // æ¨¡æ‹Ÿå¤±è´¥
            }
        }, 1000); // æ¨¡æ‹Ÿç½‘ç»œå»¶è¿Ÿ
    });
}

// è°ƒç”¨å¼‚æ­¥å‡½æ•°
(async () => {
    try {
        const userData = await fetchUserData(1);
        console.log('Fetched user data:', userData);
    } catch (error) {
        console.error('Error fetching user data:', error.message);
    }
})();
```
*è¿™æ®µ TypeScript ä»£ç å®šä¹‰äº†ä¸€ä¸ª `fetchUserData` å¼‚æ­¥å‡½æ•°ï¼Œå®ƒè°ƒç”¨ä¸€ä¸ªæ¨¡æ‹Ÿçš„ `fetchDataFromServer` å‡½æ•°ã€‚`fetchUserData` ä½¿ç”¨ `await` ç­‰å¾… `fetchDataFromServer` è¿”å›çš„ Promiseï¼Œå¹¶æ ¹æ®ç»“æœè§£ææ•°æ®æˆ–æŠ›å‡ºé”™è¯¯ã€‚è°ƒç”¨éƒ¨åˆ†ä½¿ç”¨ IIFE (Immediately Invoked Function Expression) æ¥åœ¨é¡¶å±‚ä½¿ç”¨ `await`ã€‚*

#### 6.2.2 å¹¶å‘æ‰§è¡Œå¤šä¸ªå¼‚æ­¥ä»»åŠ¡ (`Promise.all`)
```typescript
async function fetchMultipleUsers(userIds: number[]): Promise<string[]> {
    // åˆ›å»ºä¸€ä¸ªåŒ…å«å¤šä¸ª fetchUserData è°ƒç”¨çš„ Promise æ•°ç»„
    const userPromises = userIds.map(id => fetchUserData(id));
    
    // ä½¿ç”¨ Promise.all ç­‰å¾…æ‰€æœ‰ Promise å®Œæˆ
    try {
        const usersData = await Promise.all(userPromises);
        console.log('Fetched data for all users:', usersData);
        return usersData;
    } catch (error) {
        console.error('Error fetching multiple users:', error.message);
        throw error; // å¯ä»¥é€‰æ‹©é‡æ–°æŠ›å‡ºé”™è¯¯æˆ–å¤„ç†
    }
}

// è°ƒç”¨å¹¶å‘å‡½æ•°
(async () => {
    try {
        const userIds = [1, 2, 3]; // å‡è®¾ ID 2 ä¼šå¤±è´¥
        const allUserData = await fetchMultipleUsers(userIds);
        console.log('All user data:', allUserData);
    } catch {
        // é”™è¯¯å·²åœ¨ fetchMultipleUsers å†…éƒ¨å¤„ç†æˆ–è®°å½•
    }
})();
```
*æ­¤ç¤ºä¾‹å±•ç¤ºäº†å¦‚ä½•ä½¿ç”¨ `Promise.all` æ¥å¹¶å‘æ‰§è¡Œå¤šä¸ª `fetchUserData` è°ƒç”¨ã€‚`userIds.map(id => fetchUserData(id))` ä¼šç«‹å³å¯åŠ¨æ‰€æœ‰è¯·æ±‚ï¼Œè¿”å›ä¸€ä¸ª Promise æ•°ç»„ã€‚`await Promise.all(userPromises)` ä¼šç­‰å¾…æ‰€æœ‰è¿™äº› Promise å…¨éƒ¨å®Œæˆï¼ˆæˆ–å…¶ä¸­ä¸€ä¸ªå¤±è´¥ï¼‰ã€‚å¦‚æœä»»ä½•ä¸€ä¸ª Promise è¢«æ‹’ç»ï¼Œ`Promise.all` è¿”å›çš„ Promise ä¼šç«‹å³è¢«æ‹’ç»ï¼Œå¹¶å¸¦æœ‰ç¬¬ä¸€ä¸ªè¢«æ‹’ç»çš„ Promise çš„åŸå› ã€‚*

#### 6.2.3 å¼‚æ­¥æ“ä½œä¸­çš„é”™è¯¯å¤„ç†
```typescript
// é”™è¯¯å¤„ç†å·²åœ¨ä¸Šè¿°ç¤ºä¾‹ä¸­å±•ç¤ºï¼Œè¿™é‡Œå†å¼ºè°ƒä¸€ä¸‹ try-catch çš„ä½¿ç”¨
async function updateUserProfile(userId: number, updateData: any) {
    try {
        // å‡è®¾ saveUserProfile æ˜¯ä¸€ä¸ªè¿”å› Promise<void> çš„å¼‚æ­¥å‡½æ•°
        await saveUserProfile(userId, updateData);
        console.log(`Profile for user ${userId} updated successfully.`);
    } catch (error) {
        if (error instanceof SpecificDBError) { // å‡è®¾æœ‰ä¸€ä¸ªç‰¹å®šçš„æ•°æ®åº“é”™è¯¯ç±»å‹
            console.error(`Database error while updating profile for user ${userId}:`, error.message);
            // å¯èƒ½çš„æ¢å¤é€»è¾‘æˆ–é‡è¯•æœºåˆ¶
        } else {
            console.error(`General error updating profile for user ${userId}:`, error.message);
            throw error; // é‡æ–°æŠ›å‡ºæœªçŸ¥é”™è¯¯
        }
    }
}

// æ¨¡æ‹Ÿçš„ saveUserProfile å‡½æ•°ï¼Œå¯èƒ½æŠ›å‡ºé”™è¯¯
async function saveUserProfile(userId: number, data: any): Promise<void> {
    return new Promise((resolve, reject) => {
        setTimeout(() => {
            if (userId === 1) {
                resolve();
            } else {
                reject(new SpecificDBError('Failed to save to database.'));
            }
        }, 500);
    });
}

class SpecificDBError extends Error {
    constructor(message: string) {
        super(message);
        this.name = 'SpecificDBError';
    }
}

// è°ƒç”¨å‡½æ•°
(async () => {
    await updateUserProfile(1, { name: 'John Doe' });
    await updateUserProfile(2, { name: 'Jane Doe' }); // è¿™å°†è§¦å‘ä¸€ä¸ª SpecificDBError
})();
```
*æ­¤ç¤ºä¾‹è¿›ä¸€æ­¥ç»†åŒ–äº† TypeScript ä¸­çš„å¼‚æ­¥é”™è¯¯å¤„ç†ã€‚`updateUserProfile` å‡½æ•°å°è¯•è°ƒç”¨ `saveUserProfile`ã€‚å®ƒä½¿ç”¨ `try-catch` æ¥æ•è·é”™è¯¯ï¼Œå¹¶å¯ä»¥æ ¹æ®é”™è¯¯çš„å…·ä½“ç±»å‹ï¼ˆä¾‹å¦‚ï¼Œä¸€ä¸ªè‡ªå®šä¹‰çš„ `SpecificDBError`ï¼‰æ‰§è¡Œä¸åŒçš„å¤„ç†é€»è¾‘ã€‚å¦‚æœé”™è¯¯ä¸æ˜¯é¢„æœŸçš„ç±»å‹ï¼Œå®ƒå¯ä»¥è¢«é‡æ–°æŠ›å‡ºã€‚*

### 6.3 Python ç¤ºä¾‹
#### 6.3.1 åŸºæœ¬å¼‚æ­¥å‡½æ•°å®šä¹‰ä¸è°ƒç”¨
```python
import asyncio

# å®šä¹‰ä¸€ä¸ªå¼‚æ­¥å‡½æ•°ï¼Œæ¨¡æ‹Ÿç½‘ç»œè¯·æ±‚
async def fetch_user_data(user_id: int) -> str:
    # å‡è®¾ fetch_data_from_server æ˜¯ä¸€ä¸ªè¿”å› str çš„å¼‚æ­¥å‡½æ•°
    response = await fetch_data_from_server(f"/users/{user_id}")
    if not response.startswith("Data for user"):
        raise ValueError(f"Failed to fetch user data for ID {user_id}")
    return response

# æ¨¡æ‹Ÿçš„ fetch_data_from_server å¼‚æ­¥å‡½æ•°
async def fetch_data_from_server(url: str) -> str:
    await asyncio.sleep(1)  # æ¨¡æ‹Ÿç½‘ç»œå»¶è¿Ÿ
    if url == "/users/1":
        return f"Data for user 1"
    else:
        return "Error: Not found"

# è°ƒç”¨å¼‚æ­¥å‡½æ•°
async def main():
    try:
        user_data = await fetch_user_data(1)
        print(f"Fetched user data: {user_data}")
    except ValueError as e:
        print(f"Error: {e}")

asyncio.run(main())
```
*è¿™æ®µ Python ä»£ç ä½¿ç”¨ `async def` å®šä¹‰äº†ä¸€ä¸ª `fetch_user_data` åç¨‹ï¼Œå®ƒè°ƒç”¨ä¸€ä¸ªæ¨¡æ‹Ÿçš„ `fetch_data_from_server` åç¨‹ã€‚`fetch_user_data` ä½¿ç”¨ `await` ç­‰å¾… `fetch_data_from_server` çš„ç»“æœï¼Œå¹¶æ ¹æ®ç»“æœè¿”å›æ•°æ®æˆ–å¼•å‘å¼‚å¸¸ã€‚`asyncio.run(main())` æ˜¯è¿è¡Œé¡¶å±‚åç¨‹çš„æ ‡å‡†æ–¹å¼ã€‚*

#### 6.3.2 å¹¶å‘æ‰§è¡Œå¤šä¸ªå¼‚æ­¥ä»»åŠ¡ (`asyncio.gather`)
```python
import asyncio

async def fetch_multiple_users(user_ids: list[int]) -> list[str]:
    # åˆ›å»ºä¸€ä¸ªåŒ…å«å¤šä¸ª fetch_user_data è°ƒç”¨çš„åç¨‹å¯¹è±¡åˆ—è¡¨
    tasks = [fetch_user_data(uid) for uid in user_ids]
    
    # ä½¿ç”¨ asyncio.gather å¹¶å‘è¿è¡Œæ‰€æœ‰åç¨‹å¹¶æ”¶é›†ç»“æœ
    try:
        users_data = await asyncio.gather(*tasks)
        print(f"Fetched data for all users: {users_data}")
        return users_data
    except ValueError as e: # å‡è®¾æ‰€æœ‰é”™è¯¯éƒ½æ˜¯ ValueError
        print(f"Error fetching multiple users: {e}")
        # æ³¨æ„ï¼šå¦‚æœ gather ä¸­æŸä¸ªä»»åŠ¡å¤±è´¥ï¼Œé»˜è®¤ä¼šå–æ¶ˆå…¶ä»–ä»»åŠ¡å¹¶æŠ›å‡ºç¬¬ä¸€ä¸ªå¼‚å¸¸
        # å¯ä»¥é€šè¿‡ return_exceptions=True æ¥æ”¶é›†æ‰€æœ‰å¼‚å¸¸ä½œä¸ºç»“æœ

# è°ƒç”¨å¹¶å‘å‡½æ•°
async def main_concurrent():
    user_ids = [1, 2, 3]  # å‡è®¾ ID 2 ä¼šå¤±è´¥
    all_user_data = await fetch_multiple_users(user_ids)
    print(f"All user data: {all_user_data}")

asyncio.run(main_concurrent())
```
*æ­¤ç¤ºä¾‹å±•ç¤ºäº†å¦‚ä½•ä½¿ç”¨ `asyncio.gather` æ¥å¹¶å‘æ‰§è¡Œå¤šä¸ª `fetch_user_data` åç¨‹ã€‚`[fetch_user_data(uid) for uid in user_ids]` åˆ›å»ºäº†ä¸€ä¸ªåç¨‹å¯¹è±¡åˆ—è¡¨ã€‚`await asyncio.gather(*tasks)` ä¼šå¹¶å‘è¿è¡Œè¿™äº›åç¨‹ï¼Œå¹¶ç­‰å¾…å®ƒä»¬å…¨éƒ¨å®Œæˆï¼Œè¿”å›ä¸€ä¸ªåŒ…å«æ‰€æœ‰ç»“æœçš„åˆ—è¡¨ã€‚é»˜è®¤æƒ…å†µä¸‹ï¼Œå¦‚æœ `gather` ä¸­çš„ä»»ä½•ä¸€ä¸ªåç¨‹å¼•å‘å¼‚å¸¸ï¼Œ`gather` ä¼šç«‹å³å–æ¶ˆæ‰€æœ‰å…¶ä»–æœªå®Œæˆçš„åç¨‹ï¼Œå¹¶å°†è¯¥å¼‚å¸¸ä¼ æ’­å‡ºå»ã€‚å¯ä»¥é€šè¿‡ `return_exceptions=True` å‚æ•°æ¥æ”¹å˜æ­¤è¡Œä¸ºï¼Œä½¿å…¶æ”¶é›†å¼‚å¸¸å¯¹è±¡ä½œä¸ºç»“æœçš„ä¸€éƒ¨åˆ†ã€‚*

#### 6.3.3 å¼‚æ­¥æ“ä½œä¸­çš„é”™è¯¯å¤„ç†
```python
import asyncio

# é”™è¯¯å¤„ç†å·²åœ¨ä¸Šè¿°ç¤ºä¾‹ä¸­å±•ç¤ºï¼Œè¿™é‡Œå†å¼ºè°ƒä¸€ä¸‹ try-except çš„ä½¿ç”¨
async def update_user_profile(user_id: int, update_data: dict) -> None:
    try:
        # å‡è®¾ save_user_profile æ˜¯ä¸€ä¸ªå¼‚æ­¥å‡½æ•°
        await save_user_profile(user_id, update_data)
        print(f"Profile for user {user_id} updated successfully.")
    except SpecificDBError as e:  # å‡è®¾æœ‰ä¸€ä¸ªç‰¹å®šçš„æ•°æ®åº“é”™è¯¯ç±»å‹
        print(f"Database error while updating profile for user {user_id}: {e}")
        # å¯èƒ½çš„æ¢å¤é€»è¾‘æˆ–é‡è¯•æœºåˆ¶
    except Exception as e:
        print(f"General error updating profile for user {user_id}: {e}")
        raise  # é‡æ–°æŠ›å‡ºæœªçŸ¥é”™è¯¯

# æ¨¡æ‹Ÿçš„ save_user_profile å¼‚æ­¥å‡½æ•°ï¼Œå¯èƒ½å¼•å‘ç‰¹å®šé”™è¯¯
async def save_user_profile(user_id: int, data: dict) -> None:
    await asyncio.sleep(0.5)  # æ¨¡æ‹Ÿæ•°æ®åº“æ“ä½œå»¶è¿Ÿ
    if user_id == 1:
        return
    else:
        raise SpecificDBError("Failed to save to database.")

class SpecificDBError(Exception):
    pass

# è°ƒç”¨å‡½æ•°
async def main_error_handling():
    await update_user_profile(1, {"name": "John Doe"})
    await update_user_profile(2, {"name": "Jane Doe"})  # è¿™å°†è§¦å‘ä¸€ä¸ª SpecificDBError

asyncio.run(main_error_handling())
```
*æ­¤ç¤ºä¾‹è¿›ä¸€æ­¥ç»†åŒ–äº† Python å¼‚æ­¥ç¼–ç¨‹ä¸­çš„é”™è¯¯å¤„ç†ã€‚`update_user_profile` åç¨‹å°è¯•è°ƒç”¨ `save_user_profile`ã€‚å®ƒä½¿ç”¨ `try-except` å—æ¥æ•è·å¯èƒ½å‘ç”Ÿçš„å¼‚å¸¸ã€‚å¯ä»¥é’ˆå¯¹ç‰¹å®šçš„å¼‚å¸¸ç±»å‹ï¼ˆå¦‚è‡ªå®šä¹‰çš„ `SpecificDBError`ï¼‰ç¼–å†™ä¸“é—¨çš„é”™è¯¯å¤„ç†é€»è¾‘ã€‚å¯¹äºæœªé¢„æœŸçš„å…¶ä»–å¼‚å¸¸ï¼Œå¯ä»¥é€‰æ‹©è®°å½•å¹¶é‡æ–°æŠ›å‡ºã€‚*

## 7. æ€»ç»“ä¸å±•æœ›
### 7.1 å„è¯­è¨€ `async/await` æœºåˆ¶çš„æ ¸å¿ƒç‰¹ç‚¹å›é¡¾
**Swift 5 çš„ `async/await` æœºåˆ¶**ä»¥å…¶**ç»“æ„åŒ–å¹¶å‘**ä¸ºæ ¸å¿ƒï¼Œé€šè¿‡ `Task` ç±»å‹ã€`Actor` æ¨¡å‹ä»¥åŠå¯¹ç¼–è¯‘å™¨å±‚é¢çŠ¶æ€æœºå’Œç»­ä½“çš„è¿ç”¨ï¼Œæä¾›äº†å¼ºå¤§ä¸”å®‰å…¨çš„å¼‚æ­¥ç¼–ç¨‹èƒ½åŠ›ã€‚å®ƒå¼ºè°ƒéé˜»å¡çš„ä»»åŠ¡æŒ‚èµ·ï¼Œæ—¨åœ¨æé«˜ä»£ç çš„å¯è¯»æ€§ã€å¯ç»´æŠ¤æ€§å’Œæ€§èƒ½ï¼Œå°¤å…¶åœ¨ Apple å¹³å°å¼€å‘ä¸­å±•ç°å‡ºå·¨å¤§æ½œåŠ›ã€‚å…¶é”™è¯¯å¤„ç†ä¸ Swift åŸç”Ÿ `throws`/`catch` æœºåˆ¶æ— ç¼é›†æˆï¼Œä¿æŒäº†ä»£ç é£æ ¼çš„ä¸€è‡´æ€§ã€‚

**TypeScript (JavaScript) çš„ `async/await`** æ˜¯å»ºç«‹åœ¨æˆç†Ÿçš„ **`Promise` å’Œäº‹ä»¶å¾ªç¯æœºåˆ¶**ä¹‹ä¸Šçš„è¯­æ³•ç³–ã€‚å®ƒæå¤§åœ°ç®€åŒ–äº†åŸºäº `Promise` çš„å¼‚æ­¥ä»£ç ç¼–å†™ï¼Œä½¿å…¶æ›´æ¥è¿‘åŒæ­¥é£æ ¼ï¼Œä»è€Œæ”¹å–„äº†ä»£ç çš„å¯è¯»æ€§å’Œå¯ç»´æŠ¤æ€§ã€‚å…¶æ ¸å¿ƒä¼˜åŠ¿åœ¨äºå•çº¿ç¨‹éé˜»å¡ I/O å¤„ç†ï¼Œéå¸¸é€‚åˆ Web å‰ç«¯å’Œ Node.js åç«¯å¼€å‘ã€‚é”™è¯¯å¤„ç†åŒæ ·é‡‡ç”¨ `try/catch` ç»“æ„ï¼Œä¸åŒæ­¥ä»£ç ä¿æŒä¸€è‡´ã€‚

**Python çš„ `async/await`** æœºåˆ¶åˆ™ä¸ **`asyncio` åº“å’Œåç¨‹**ç´§å¯†ç»‘å®šï¼Œé€šè¿‡**äº‹ä»¶å¾ªç¯å’Œåä½œå¼å¤šä»»åŠ¡**æ¥å®ç°å¼‚æ­¥ç¼–ç¨‹ã€‚å®ƒç‰¹åˆ«é€‚ç”¨äº I/O å¯†é›†å‹åº”ç”¨ï¼Œå¦‚ç½‘ç»œæœåŠ¡å™¨å’Œçˆ¬è™«ï¼Œèƒ½å¤Ÿæœ‰æ•ˆåœ°ç®¡ç†å¤§é‡å¹¶å‘è¿æ¥ã€‚Python çš„å¼‚æ­¥ç¼–ç¨‹æ¨¡å‹è¦æ±‚å¼€å‘è€…ç†è§£å¹¶éµå¾ªåä½œåŸåˆ™ï¼Œé€‚æ—¶è®©å‡ºæ§åˆ¶æƒã€‚é”™è¯¯å¤„ç†ä¹Ÿé‡‡ç”¨ `try/except` ç»“æ„ï¼Œä¸åŒæ­¥ä»£ç é£æ ¼ç»Ÿä¸€ã€‚

### 7.2 æœªæ¥å¼‚æ­¥ç¼–ç¨‹å‘å±•è¶‹åŠ¿
å¼‚æ­¥ç¼–ç¨‹å·²ç»æˆä¸ºç°ä»£è½¯ä»¶å¼€å‘ä¸å¯æˆ–ç¼ºçš„ä¸€éƒ¨åˆ†ï¼Œè€Œ `async/await` æ¨¡å¼æ— ç–‘æ˜¯å½“å‰åŠæœªæ¥ä¸€æ®µæ—¶é—´å†…çš„ä¸»æµè¶‹åŠ¿ã€‚å±•æœ›æœªæ¥ï¼Œæˆ‘ä»¬å¯ä»¥é¢„è§ä»¥ä¸‹å‡ ä¸ªå‘å±•æ–¹å‘ï¼š

1.  **è¯­è¨€å’Œæ¡†æ¶çš„è¿›ä¸€æ­¥æ•´åˆä¸ä¼˜åŒ–**ï¼šå„è¯­è¨€ä¼šç»§ç»­ä¼˜åŒ–å…¶ `async/await` çš„å®ç°ï¼Œå‡å°‘æ½œåœ¨çš„æ€§èƒ½å¼€é”€ï¼Œæä¾›æ›´å¼ºå¤§çš„å¹¶å‘åŸè¯­å’Œå·¥å…·ã€‚ä¾‹å¦‚ï¼ŒSwift å¯èƒ½ä¼šè¿›ä¸€æ­¥å¢å¼º `Actor` æ¨¡å‹å’Œç»“æ„åŒ–å¹¶å‘çš„æ˜“ç”¨æ€§ã€‚Python çš„ `asyncio` åº“å’Œç›¸å…³çš„å¼‚æ­¥ç”Ÿæ€ä¹Ÿä¼šæŒç»­æˆç†Ÿã€‚
2.  **æ›´æ™ºèƒ½çš„å¹¶å‘è°ƒåº¦å’Œç®¡ç†**ï¼šè¿è¡Œæ—¶ç³»ç»Ÿå’Œç¼–è¯‘å™¨å¯èƒ½ä¼šå¼•å…¥æ›´æ™ºèƒ½çš„è°ƒåº¦ç®—æ³•ï¼Œä»¥æ›´å¥½åœ°åˆ©ç”¨å¤šæ ¸å¤„ç†å™¨ï¼Œè‡ªåŠ¨ä¼˜åŒ–ä»»åŠ¡åˆ†é…å’Œè´Ÿè½½å‡è¡¡ï¼ŒåŒæ—¶ç®€åŒ–å¼€å‘è€…çš„å¹¶å‘æ§åˆ¶è´Ÿæ‹…ã€‚
3.  **å¼‚æ­¥ç¼–ç¨‹èŒƒå¼çš„æ™®åŠå’Œæ ‡å‡†åŒ–**ï¼šéšç€æ›´å¤šå¼€å‘è€…ç†Ÿæ‚‰ `async/await`ï¼Œå®ƒå°†æˆä¸ºæ›´å¹¿æ³›åº”ç”¨çš„ç¼–ç¨‹èŒƒå¼ï¼Œä¸ä»…åœ¨æœåŠ¡å™¨ç«¯å’Œå®¢æˆ·ç«¯ï¼Œä¹Ÿå¯èƒ½åœ¨æ›´å¤šé¢†åŸŸï¼ˆå¦‚æ•°æ®å¤„ç†ã€æœºå™¨å­¦ä¹ æ¨¡å‹æ¨ç†ç­‰ï¼‰å‘æŒ¥ä½œç”¨ã€‚è·¨è¯­è¨€çš„å¼‚æ­¥ç¼–ç¨‹æ¥å£æˆ–æ ‡å‡†ä¹Ÿå¯èƒ½å‡ºç°ï¼Œä»¥ä¿ƒè¿›ä¸åŒç³»ç»Ÿé—´çš„äº’æ“ä½œæ€§ã€‚
4.  **é”™è¯¯å¤„ç†å’Œå¯è§‚æµ‹æ€§çš„å¢å¼º**ï¼šå¼‚æ­¥ä»£ç çš„è°ƒè¯•å’Œé”™è¯¯è¿½è¸ªä¸€ç›´æ˜¯ä¸€ä¸ªæŒ‘æˆ˜ã€‚æœªæ¥çš„å·¥å…·å’Œæ¡†æ¶å¯èƒ½ä¼šæä¾›æ›´å¼ºå¤§çš„å¼‚æ­¥å †æ ˆè¿½è¸ªã€å¯è§†åŒ–è°ƒè¯•ä»¥åŠæ›´ç²¾ç»†åŒ–çš„é”™è¯¯æŠ¥å‘Šå’Œç›‘æ§èƒ½åŠ›ï¼Œå¸®åŠ©å¼€å‘è€…æ›´è½»æ¾åœ°æ„å»ºå’Œç»´æŠ¤å¤æ‚çš„å¼‚æ­¥ç³»ç»Ÿã€‚
5.  **ä¸å“åº”å¼ç¼–ç¨‹ã€æ•°æ®æµç¼–ç¨‹çš„èåˆ**ï¼š`async/await` ä¸»è¦è§£å†³çš„æ˜¯å•ä¸ªå¼‚æ­¥æ“ä½œçš„ç­‰å¾…é—®é¢˜ã€‚æœªæ¥å¯èƒ½ä¼šçœ‹åˆ°å®ƒä¸å“åº”å¼ç¼–ç¨‹ï¼ˆå¦‚ RxJS, Combineï¼‰æˆ–æ•°æ®æµç¼–ç¨‹æ¨¡å‹æ›´ç´§å¯†åœ°ç»“åˆï¼Œä»¥å¤„ç†æ›´å¤æ‚çš„å¼‚æ­¥æ•°æ®æµå’Œäº‹ä»¶æµåœºæ™¯ã€‚

æ€»è€Œè¨€ä¹‹ï¼Œå¼‚æ­¥ç¼–ç¨‹å°†ç»§ç»­æœç€æ›´ç®€å•ã€æ›´é«˜æ•ˆã€æ›´å®‰å…¨çš„æ–¹å‘å‘å±•ï¼Œ`async/await` ä½œä¸ºå…¶ä¸­çš„æ ¸å¿ƒæœºåˆ¶ï¼Œå°†æŒç»­æ¼”è¿›å¹¶èµ‹èƒ½å¼€å‘è€…æ„å»ºæ›´é«˜æ€§èƒ½ã€æ›´å¯é çš„åº”ç”¨ç¨‹åºã€‚
